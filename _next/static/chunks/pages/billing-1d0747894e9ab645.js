(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[67],{20662:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/billing",function(){return t(62699)}])},61124:function(e,n,t){"use strict";t.d(n,{I:function(){return m}});var i=t(26042),r=t(69396),l=t(99534),o=t(828),s=t(85893),a=t(50135),c=t(16829),u=t(67294),d=t(66660),h=(0,c.Z)(a.Z)({"& .MuiFormHelperText-root.Mui-error":{position:"absolute",top:"100%"},"input::-webkit-outer-spin-button, input::-webkit-inner-spin-button":{WebkitAppearance:"none"},"& .MuiSelect-select":{paddingTop:21}}),m=function(e){var n=e.children,t=e.type,a=(0,l.Z)(e,["children","type"]),c=(0,o.Z)((0,u.useState)(a.value||""),2),m=c[0],x=c[1];(0,u.useEffect)(function(){x(a.value)},[a.value]);var p=function(e){var n;null===(n=a.onChange)||void 0===n||n.call(a,e)};return"color"===t?(0,s.jsx)(d.O,(0,r.Z)((0,i.Z)({},a),{type:"text"})):(0,s.jsx)(h,(0,r.Z)((0,i.Z)({},a),{type:t,value:m,onChange:function(e){x(e.target.value),a.select&&p(e)},onBlur:function(e){var n;a.select||p(e),null===(n=a.handleBlur)||void 0===n||n.call(a,e)},children:n}))}},62077:function(e,n,t){"use strict";t.d(n,{a:function(){return a}});var i=t(26042),r=t(99534),l=t(85893),o=t(87357),s=t(98456),a=function(e){var n=e.backdrop,t=e.sx;(0,r.Z)(e,["backdrop","sx"]);var a=(0,l.jsx)(o.Z,{sx:(0,i.Z)({position:"absolute",bottom:0,top:0,left:0,right:0,bgcolor:n?"rgb(0 0 1 / 30%)":"transparent",zIndex:100,display:"flex",justifyContent:"center",alignItems:"center"},t),children:(0,l.jsx)(s.Z,{disableShrink:!0,color:"primary"})});return(0,l.jsx)(l.Fragment,{children:a})}},3174:function(e,n,t){"use strict";t.d(n,{t:function(){return o}});var i=t(99534),r=t(85893),l=t(8896),o=function(e){var n=e.limit,t=e.total,o=e.page,s=e.onPageChange,a=e.onLimitChange;return(0,i.Z)(e,["limit","total","page","onPageChange","onLimitChange"]),(0,r.jsx)(l.Z,{component:"div",count:t,onPageChange:s,onRowsPerPageChange:a,page:o-1,rowsPerPage:n,rowsPerPageOptions:[10,25,50]})}},83594:function(e,n,t){"use strict";t.d(n,{h:function(){return s}});var i=t(26042),r=t(69396),l=t(828);t(11163),t(44795);var o=t(67294),s=function(){var e=(0,l.Z)((0,o.useState)({page:1,limit:10,offset:0}),2),n=e[0],t=e[1],s=(0,o.useCallback)(function(e,n){t(function(e){return(0,r.Z)((0,i.Z)({},e),{page:n+1,offset:n*e.limit})})},[]),a=(0,o.useCallback)(function(e){t(function(n){return(0,r.Z)((0,i.Z)({},n),{page:1,limit:parseInt(e.target.value,10),offset:0})})},[]);return(0,r.Z)((0,i.Z)({},n),{handlePageChange:s,handleLimitChange:a})}},62699:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return eC}});var i,r=t(47568),l=t(26042),o=t(828),s=t(70655),a=t(85893),c=t(67294),u=t(10216),d=t(26447),h=t(15861),m=t(83321),x=t(53219),p=t(66242),Z=t(88409),f=t(40044),j=t(67720),g=t(92951),v=t(4056),C=t(86501),b=t(83720),y=t(8085),k=function(e){var n=(0,b.I0)(),t=(0,b.v9)(function(e){return e.transactions.list}),i=t.data,r=t.loading,l=t.error,o=(0,c.useCallback)(function(){n((0,y.dq)(e))},[e,n]),s=(0,c.useCallback)(function(){o()},[o]);return(0,c.useEffect)(function(){o()},[e,o]),{data:i,loading:r,error:l,update:s}},_=t(38928),w=function(e){var n=(0,b.I0)(),t=(0,b.v9)(function(e){return e.payments.list}),i=t.data,r=t.loading,l=t.error,o=(0,c.useCallback)(function(){n((0,_.kd)(e))},[e,n]),s=(0,c.useCallback)(function(){o()},[o]);return(0,c.useEffect)(function(){o()},[e,o]),{data:i,loading:r,error:l,update:s}},P=t(69396),S=t(87357),T=t(7906),I=t(295),W=t(68509),E=t(98102),B=t(53184),A=t(87952),F=t(23795),M=t(64666),O=t(37645),L=t(93946),H=t(6514),N=t(18972),R=t(90052),D=t(50135),q=t(31425),z=t(50720),U=t(89393),V=t(67770),X=t(95537),G=t(74231),J=t(82175),K=t(61124),Q=t(55136),Y=t(62077),$=t(41664),ee=t.n($),en=t(93041),et=t(3174),ei=t(83594),er={type:100,amount:"",user_id:"",comment:""},el=G.Ry({type:G.Rx().oneOf([100,101]).required("Select type"),amount:G.Rx().required("Enter amount"),comment:G.Z_()}),eo=function(e){var n,t,i,r=e.onFiltersChange,s=e.transactions,u=e.dialogOpen,x=e.dialogClose,p=e.clients,Z=e.onSubmit,f=e.isAdmin,j=(0,o.Z)((0,c.useState)(null),2),g=j[0],v=j[1],C=(0,o.Z)((0,c.useState)(null),2),b=C[0],y=C[1],k=(0,ei.h)(),_=k.page,w=k.limit,G=k.offset,$=k.handlePageChange,eo=k.handleLimitChange,es=s.data,ea=s.loading;s.error,(0,c.useEffect)(function(){r({limit:w,offset:G})},[w,_,G,r]),(0,c.useEffect)(function(){p&&y(p[0])},[p]),(0,c.useEffect)(function(){(null==g?void 0:g.start)&&(null==g?void 0:g.end)&&r({timestamp:g})},[g,r]);var ec=(0,c.useCallback)(function(e){y(e)},[]),eu=(0,J.TA)({initialValues:er,validationSchema:el,errors:{},onSubmit:function(e,n){try{e.user_id=b.id,Z(e)}catch(t){console.error(t),n.setStatus({success:!1}),n.setErrors({submit:t.message}),n.setSubmitting(!1)}}});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(z._,{dateAdapter:U.H,children:(0,a.jsxs)(d.Z,{alignItems:"center",direction:"row",flexWrap:"wrap",spacing:3,sx:{p:3},children:[(0,a.jsx)(V.M,{label:"From",onChange:function(e){v(function(n){return(0,P.Z)((0,l.Z)({},n),{start:Math.floor(e.getTime()/1e3)})})}}),(0,a.jsx)(V.M,{label:"To",onChange:function(e){v(function(n){return(0,P.Z)((0,l.Z)({},n),{end:Math.floor(e.getTime()/1e3)})})}})]})}),(0,a.jsxs)(S.Z,{sx:{position:"relative"},children:[(0,a.jsx)(Q.L,{children:(0,a.jsxs)(T.Z,{sx:{minWidth:700},children:[ea&&!(null==es?void 0:null===(n=es.items)||void 0===n?void 0:n.length)&&(0,a.jsx)(I.Z,{children:(0,a.jsx)(W.Z,{children:(0,a.jsx)(E.Z,{children:(0,a.jsx)(S.Z,{sx:{position:"relative",width:"100%",height:"200px"},children:(0,a.jsx)(Y.a,{})})})})}),!ea&&!(null==es?void 0:es.items.length)&&(0,a.jsx)(I.Z,{children:(0,a.jsx)(W.Z,{children:(0,a.jsx)(E.Z,{align:"center",children:(0,a.jsx)(h.Z,{variant:"subtitle2",children:"Nothing found"})})})}),!!(null==es?void 0:null===(t=es.items)||void 0===t?void 0:t.length)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(B.Z,{children:(0,a.jsxs)(W.Z,{children:[(0,a.jsx)(E.Z,{children:"Date"}),f&&(0,a.jsx)(E.Z,{children:"User"}),(0,a.jsx)(E.Z,{children:"Amount"}),(0,a.jsx)(E.Z,{children:"Type"}),(0,a.jsx)(E.Z,{children:"Comment"})]})}),(0,a.jsx)(I.Z,{children:es&&(null===(i=es.items)||void 0===i?void 0:i.length)&&es.items.map(function(e){return(0,a.jsxs)(W.Z,{hover:!0,children:[(0,a.jsx)(E.Z,{children:e.timestamp}),f&&(0,a.jsx)(E.Z,{children:(0,a.jsxs)(d.Z,{alignItems:"center",direction:"row",spacing:1,children:[(0,a.jsx)(A.Z,{src:e.user.avatar,sx:{height:42,width:42}}),(0,a.jsxs)("div",{children:[(0,a.jsx)(F.Z,{color:"inherit",component:ee(),href:"".concat(en.H.users.index,"/").concat(e.user.id),variant:"subtitle2",children:e.user.name}),(0,a.jsx)(h.Z,{color:"text.secondary",variant:"body2",children:e.user.email})]})]})}),(0,a.jsx)(E.Z,{children:e.amount}),(0,a.jsx)(E.Z,{children:100===e.type?"Invoice":"Bonus"}),(0,a.jsx)(E.Z,{children:e.comment})]},e.id)})})]})]})}),es&&(0,a.jsx)(et.t,{limit:w,total:es.total,page:_,onPageChange:$,onLimitChange:eo})]}),(0,a.jsxs)(M.Z,{open:u,onClose:x,scroll:"paper",maxWidth:"sm",fullWidth:!0,children:[(0,a.jsxs)(O.Z,{sx:{pr:10},children:[(0,a.jsx)(L.Z,{"aria-label":"close",onClick:x,sx:{position:"absolute",right:8,top:8,color:function(e){return e.palette.primary.main}},children:(0,a.jsx)(X.Z,{})}),"Create Transaction"]}),(0,a.jsx)(H.Z,{dividers:!0,children:(0,a.jsxs)(d.Z,{spacing:3,children:[(0,a.jsxs)(K.I,{fullWidth:!0,label:"Type",name:"type",onChange:eu.handleChange,select:!0,value:eu.values.type,children:[(0,a.jsx)(N.Z,{value:100,children:"Invoice"},100),(0,a.jsx)(N.Z,{value:101,children:"Bonus"},101)]}),(0,a.jsx)(K.I,{fullWidth:!0,label:"Amount",name:"amount",type:"number",error:!!(eu.touched.amount&&eu.errors.amount),helperText:eu.touched.amount&&eu.errors.amount,onBlur:eu.handleBlur,onChange:eu.handleChange,value:eu.values.amount}),!!(null==p?void 0:p.length)&&(0,a.jsx)(R.Z,{disablePortal:!0,disableClearable:!0,options:p,getOptionLabel:function(e){return(e.name?e.name+" | ":"")+e.email},onChange:function(e,n){ec(n)},value:b||p[0]||null,renderInput:function(e){return(0,a.jsx)(D.Z,(0,P.Z)((0,l.Z)({},e),{fullWidth:!0,name:"client_id",label:"Client"}))}}),(0,a.jsx)(K.I,{fullWidth:!0,label:"Comment",name:"comment",type:"text",error:!!(eu.touched.comment&&eu.errors.comment),helperText:eu.touched.comment&&eu.errors.comment,onBlur:eu.handleBlur,onChange:eu.handleChange,value:eu.values.comment})]})}),(0,a.jsxs)(q.Z,{children:[(0,a.jsx)(m.Z,{type:"button",variant:"outlined",color:"error",onClick:x,children:"Cancel"}),(0,a.jsx)(m.Z,{type:"button",variant:"contained",onClick:function(){eu.handleSubmit()},children:"Confirm"})]})]})]})},es=t(34386),ea=t(32912),ec=t(52584),eu=t(54345),ed={type:"invoice",amount:"",comment:""},eh=G.Ry({type:G.Z_().oneOf(["invoice","bonus"]).required("Select type"),amount:G.Rx().required("Enter amount"),comment:G.Z_()}),em=function(e){var n,t,i,r=e.onFiltersChange,s=e.payments,u=e.dialogOpen,p=e.dialogClose,Z=e.onSubmit,f=e.isAdmin,j=e.onPay,g=e.onCancel,v=(0,o.Z)((0,c.useState)(null),2),C=v[0],b=v[1],y=(0,o.Z)((0,c.useState)({item:null,open:!1}),2),k=y[0],_=y[1],w=(0,o.Z)((0,c.useState)({item:null,open:!1}),2),R=w[0],D=w[1],G=(0,ei.h)(),$=G.page,er=G.limit,el=G.offset,eo=G.handlePageChange,em=G.handleLimitChange,ex=s.data,ep=s.loading;(0,c.useEffect)(function(){r({limit:er,offset:el})},[er,$,el,r]),(0,c.useEffect)(function(){(null==C?void 0:C.start)&&(null==C?void 0:C.end)&&r({timestamp:C})},[C,r]);var eZ=(0,J.TA)({initialValues:ed,validationSchema:eh,errors:{},onSubmit:function(e,n){try{Z(e)}catch(t){console.error(t),n.setStatus({success:!1}),n.setErrors({submit:t.message}),n.setSubmitting(!1)}}});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(z._,{dateAdapter:U.H,children:(0,a.jsxs)(d.Z,{alignItems:"center",direction:"row",flexWrap:"wrap",spacing:3,sx:{p:3},children:[(0,a.jsx)(V.M,{label:"From",onChange:function(e){b(function(n){return(0,P.Z)((0,l.Z)({},n),{start:Math.floor(e.getTime()/1e3)})})}}),(0,a.jsx)(V.M,{label:"To",onChange:function(e){b(function(n){return(0,P.Z)((0,l.Z)({},n),{end:Math.floor(e.getTime()/1e3)})})}})]})}),(0,a.jsxs)(S.Z,{sx:{position:"relative"},children:[(0,a.jsx)(Q.L,{children:(0,a.jsxs)(T.Z,{sx:{minWidth:700},children:[ep&&!(null==ex?void 0:null===(n=ex.items)||void 0===n?void 0:n.length)&&(0,a.jsx)(I.Z,{children:(0,a.jsx)(W.Z,{children:(0,a.jsx)(E.Z,{children:(0,a.jsx)(S.Z,{sx:{position:"relative",width:"100%",height:"200px"},children:(0,a.jsx)(Y.a,{})})})})}),!ep&&!(null==ex?void 0:ex.items.length)&&(0,a.jsx)(I.Z,{children:(0,a.jsx)(W.Z,{children:(0,a.jsx)(E.Z,{align:"center",children:(0,a.jsx)(h.Z,{variant:"subtitle2",children:"Nothing found"})})})}),!!(null==ex?void 0:null===(t=ex.items)||void 0===t?void 0:t.length)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(B.Z,{children:(0,a.jsxs)(W.Z,{children:[(0,a.jsx)(E.Z,{children:"Date"}),f&&(0,a.jsx)(E.Z,{children:"User"}),(0,a.jsx)(E.Z,{children:"Amount"}),(0,a.jsx)(E.Z,{children:"Type"}),(0,a.jsx)(E.Z,{children:"Comment"}),(0,a.jsx)(E.Z,{children:"Status"}),(0,a.jsx)(E.Z,{align:"right",children:"Actions"})]})}),(0,a.jsx)(I.Z,{children:ex&&(null===(i=ex.items)||void 0===i?void 0:i.length)&&ex.items.map(function(e){return(0,a.jsxs)(W.Z,{hover:!0,children:[(0,a.jsx)(E.Z,{children:(0,ea.Z)(new Date(1e3*e.created),"yyyy-MM-dd HH:mm:ss")}),f&&(0,a.jsx)(E.Z,{children:(0,a.jsxs)(d.Z,{alignItems:"center",direction:"row",spacing:1,children:[(0,a.jsx)(A.Z,{src:e.user.avatar,sx:{height:42,width:42}}),(0,a.jsxs)("div",{children:[(0,a.jsx)(F.Z,{color:"inherit",component:ee(),href:"".concat(en.H.users.index,"/").concat(e.user.id),variant:"subtitle2",children:e.user.name}),(0,a.jsx)(h.Z,{color:"text.secondary",variant:"body2",children:e.user.email})]})]})}),(0,a.jsx)(E.Z,{children:e.amount}),(0,a.jsx)(E.Z,{children:100===e.type?"Invoice":"Bonus"}),(0,a.jsx)(E.Z,{children:e.comment}),(0,a.jsx)(E.Z,{children:(0,a.jsx)(S.Z,{sx:{textTransform:"capitalize"},children:e.status})}),(0,a.jsxs)(E.Z,{align:"right",children:[(0,a.jsx)(es.Z,{title:"Pay",children:(0,a.jsx)(L.Z,{onClick:function(){_({item:e,open:!0})},children:(0,a.jsx)(x.Z,{color:"primary",children:(0,a.jsx)(ec.Z,{})})})}),(0,a.jsx)(es.Z,{title:"Cancel",children:(0,a.jsx)(L.Z,{onClick:function(){D({item:e,open:!0})},children:(0,a.jsx)(x.Z,{color:"error",children:(0,a.jsx)(eu.Z,{})})})})]})]},e.id)})})]})]})}),ex&&(0,a.jsx)(et.t,{limit:er,total:ex.total,page:$,onPageChange:eo,onLimitChange:em})]}),(0,a.jsxs)(M.Z,{open:u,onClose:p,scroll:"paper",maxWidth:"sm",fullWidth:!0,children:[(0,a.jsxs)(O.Z,{sx:{pr:10},children:[(0,a.jsx)(L.Z,{"aria-label":"close",onClick:p,sx:{position:"absolute",right:8,top:8,color:function(e){return e.palette.primary.main}},children:(0,a.jsx)(X.Z,{})}),"Create Payment"]}),(0,a.jsx)(H.Z,{dividers:!0,children:(0,a.jsxs)(d.Z,{spacing:3,children:[(0,a.jsxs)(K.I,{fullWidth:!0,label:"Type",name:"type",onChange:eZ.handleChange,select:!0,value:eZ.values.type,children:[(0,a.jsx)(N.Z,{value:"invoice",children:"Invoice"},"invoice"),(0,a.jsx)(N.Z,{value:"bonus",children:"Bonus"},"bonus")]}),(0,a.jsx)(K.I,{fullWidth:!0,label:"Amount",name:"amount",type:"number",error:!!(eZ.touched.amount&&eZ.errors.amount),helperText:eZ.touched.amount&&eZ.errors.amount,onBlur:eZ.handleBlur,onChange:eZ.handleChange,value:eZ.values.amount}),(0,a.jsx)(K.I,{fullWidth:!0,label:"Comment",name:"comment",type:"text",error:!!(eZ.touched.comment&&eZ.errors.comment),helperText:eZ.touched.comment&&eZ.errors.comment,onBlur:eZ.handleBlur,onChange:eZ.handleChange,value:eZ.values.comment})]})}),(0,a.jsxs)(q.Z,{children:[(0,a.jsx)(m.Z,{type:"button",variant:"outlined",color:"error",onClick:p,children:"Cancel"}),(0,a.jsx)(m.Z,{type:"button",variant:"contained",onClick:function(){eZ.handleSubmit()},children:"Confirm"})]})]}),(0,a.jsxs)(M.Z,{open:k.open,onClose:function(){_({item:null,open:!1})},scroll:"paper",maxWidth:"sm",fullWidth:!0,children:[(0,a.jsxs)(O.Z,{sx:{pr:10},children:[(0,a.jsx)(L.Z,{"aria-label":"close",onClick:function(){_({item:null,open:!1})},sx:{position:"absolute",right:8,top:8,color:function(e){return e.palette.primary.main}},children:(0,a.jsx)(X.Z,{})}),"Pay payment"]}),(0,a.jsx)(H.Z,{dividers:!0,children:"Pay this payment?"}),(0,a.jsxs)(q.Z,{children:[(0,a.jsx)(m.Z,{type:"button",variant:"outlined",color:"error",onClick:function(){_({item:null,open:!1})},children:"Cancel"}),(0,a.jsx)(m.Z,{type:"button",variant:"contained",onClick:function(){j(k.item.id,function(){_({item:null,open:!1})})},children:"Confirm"})]})]}),(0,a.jsxs)(M.Z,{open:R.open,onClose:function(){D({item:null,open:!1})},scroll:"paper",maxWidth:"sm",fullWidth:!0,children:[(0,a.jsxs)(O.Z,{sx:{pr:10},children:[(0,a.jsx)(L.Z,{"aria-label":"close",onClick:function(){D({item:null,open:!1})},sx:{position:"absolute",right:8,top:8,color:function(e){return e.palette.primary.main}},children:(0,a.jsx)(X.Z,{})}),"Cancel payment"]}),(0,a.jsx)(H.Z,{dividers:!0,children:"Cancel this payment?"}),(0,a.jsxs)(q.Z,{children:[(0,a.jsx)(m.Z,{type:"button",variant:"outlined",color:"error",onClick:function(){D({item:null,open:!1})},children:"Cancel"}),(0,a.jsx)(m.Z,{type:"button",variant:"contained",onClick:function(){g(R.item.id,function(){D({item:null,open:!1})})},children:"Confirm"})]})]})]})},ex=t(63345),ep=t(58241),eZ=t(39332),ef=t(45697),ej=t.n(ef),eg=function(e){var n=e.children,t=(0,eZ.useRouter)(),i=(0,o.Z)((0,c.useState)(!1),2),r=i[0],l=i[1],s=(0,g.P)().data,u=(0,ep.a)(null==s?void 0:s.role_id),d=(0,c.useCallback)(function(){s&&(u.length||0===s.role_id)&&(0===s.role_id||u.includes("transactions.read")?l(!0):t.replace(en.H.index))},[s,u,t]);return((0,c.useEffect)(function(){d()},[s,u,d]),r)?(0,a.jsx)(a.Fragment,{children:n}):null};eg.propTypes={children:ej().node};var ev=(i=function(){var e,n,t,i,b=(0,g.P)().data,y=(0,o.Z)((0,c.useState)({limit:10}),2),_=y[0],P=y[1],S=(0,o.Z)((0,c.useState)({}),2),T=S[0],I=S[1],W=(0,o.Z)((0,c.useState)(!1),2),E=W[0],B=W[1],A=(0,o.Z)((0,c.useState)("transactions"),2),F=A[0],M=A[1],O=(0,o.Z)((0,c.useState)(null),2),L=O[0],H=O[1],N=(0,ep.a)(b&&b.role_id),R=b&&0===b.role_id,D=(0,c.useCallback)(function(e,n){M(n)},[]),q=(0,c.useCallback)((0,r.Z)(function(){var e,n;return(0,s.__generator)(this,function(t){switch(t.label){case 0:return[4,v.h.users.list({role:"client",status:"active",limit:1e3})];case 1:return n=(e=t.sent()).result,e.error,n&&H(n.items),[2]}})}),[]);(0,c.useEffect)(function(){q()},[q]);var z=(0,c.useCallback)(function(e){P(function(n){return(0,l.Z)({},n,e)})},[]),U=(0,c.useCallback)(function(e){I(function(n){return(0,l.Z)({},n,e)})},[]),V=k(_),X=w(T),G=(0,c.useCallback)((e=(0,r.Z)(function(e){var n,t,i;return(0,s.__generator)(this,function(r){switch(r.label){case 0:return[4,(0,ex.D)(500)];case 1:return r.sent(),[4,v.h.transactions.add(e)];case 2:return t=(n=r.sent()).result,i=n.error,t&&(B(!1),V.update()),i&&C.ZP.error(i.message),[2]}})}),function(n){return e.apply(this,arguments)}),[V]),J=(0,c.useCallback)((n=(0,r.Z)(function(e){var n,t,i;return(0,s.__generator)(this,function(r){switch(r.label){case 0:return[4,(0,ex.D)(500)];case 1:return r.sent(),[4,v.h.payments.add(e)];case 2:return t=(n=r.sent()).result,i=n.error,t&&(B(!1),X.update()),i&&C.ZP.error(i.message),[2]}})}),function(e){return n.apply(this,arguments)}),[X]),K=(t=(0,r.Z)(function(e,n){var t,i,r;return(0,s.__generator)(this,function(l){switch(l.label){case 0:return[4,v.h.payments.pay(e)];case 1:return i=(t=l.sent()).result,r=t.error,i&&(window.open(i,"blank","noreferrer noopener"),n()),r&&C.ZP.error(r.message),[2]}})}),function(e,n){return t.apply(this,arguments)}),Q=(i=(0,r.Z)(function(e,n){var t,i,r;return(0,s.__generator)(this,function(l){switch(l.label){case 0:return[4,v.h.payments.pay(e)];case 1:return i=(t=l.sent()).result,r=t.error,i&&(X.update(),n()),r&&C.ZP.error(r.message),[2]}})}),function(e,n){return i.apply(this,arguments)});return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(d.Z,{spacing:4,children:[(0,a.jsxs)(d.Z,{direction:"row",justifyContent:"space-between",spacing:4,children:[(0,a.jsx)(d.Z,{spacing:1,children:(0,a.jsx)(h.Z,{variant:"h4",children:"Billing"})}),(0,a.jsxs)(d.Z,{alignItems:"center",direction:"row",spacing:3,children:[R&&"transactions"===F&&(0,a.jsx)(m.Z,{onClick:function(){B(!0)},startIcon:(0,a.jsx)(x.Z,{children:(0,a.jsx)(u.Z,{})}),variant:"contained",children:"Add Transaction"}),R&&"payments"===F&&(0,a.jsx)(m.Z,{onClick:function(){B(!0)},startIcon:(0,a.jsx)(x.Z,{children:(0,a.jsx)(u.Z,{})}),variant:"contained",children:"Create Payment"})]})]}),(0,a.jsxs)(p.Z,{children:[(0,a.jsxs)(Z.Z,{indicatorColor:"primary",onChange:D,scrollButtons:"auto",sx:{px:3},textColor:"primary",value:F,variant:"scrollable",children:[(0,a.jsx)(f.Z,{label:"Transactions",value:"transactions"},"transactions"),(R||N.includes("payments.read"))&&(0,a.jsx)(f.Z,{label:"Payments",value:"payments"},"payments")]}),(0,a.jsx)(j.Z,{}),"transactions"===F&&(0,a.jsx)("div",{children:(0,a.jsx)(eo,{transactions:V,onFiltersChange:z,dialogOpen:E,dialogClose:function(){B(!1)},clients:L,onSubmit:G,isAdmin:R})}),"payments"===F&&(0,a.jsx)("div",{children:(0,a.jsx)(em,{payments:X,onFiltersChange:U,dialogOpen:E,dialogClose:function(){B(!1)},onSubmit:J,isAdmin:R,onPay:K,onCancel:Q})})]})]})})},function(e){return(0,a.jsx)(eg,{children:(0,a.jsx)(i,(0,l.Z)({},e))})});ev.defaultProps={title:"Billing"};var eC=ev},63345:function(e,n,t){"use strict";t.d(n,{D:function(){return i}});var i=function(e){return new Promise(function(n){return setTimeout(n,e)})}}},function(e){e.O(0,[235,105,290,896,918,52,974,774,567,179],function(){return e(e.s=20662)}),_N_E=e.O()}]);