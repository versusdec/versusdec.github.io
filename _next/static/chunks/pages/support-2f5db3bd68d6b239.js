(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[563],{97294:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/support",function(){return r(51621)}])},51621:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return eE}});var t=r(828),s=r(85893),i=r(67294),a=r(9008),o=r.n(a),c=r(39332),l=r(11347),u=r(98396),d=r(15861),h=r(67720),x=r(87357),p=r(93946),f=r(53219),Z=function(){return(0,s.jsxs)(x.Z,{sx:{alignItems:"center",display:"flex",flexGrow:1,flexDirection:"column",justifyContent:"center",overflow:"hidden"},children:[(0,s.jsx)(x.Z,{component:"img",src:"/assets/errors/error-404.png",sx:{height:"auto",maxWidth:120}}),(0,s.jsx)(d.Z,{color:"text.secondary",sx:{mt:2},variant:"subtitle1",children:"Start meaningful conversations!"})]})},j=r(26042),m=r(69396),v=r(36305),g=r(93041),y=r(34119),b=r(47568),k=r(99534),C=r(20414),w=r(45697),S=r.n(w),R=r(95226),A=r(23926),T=r(57709),I=r(87109),_=r(17417),P=r(11791),E=r(78462),F=r(98619),W=r(18987),q=r(87952),K=r(59334),M=r(26447),G=r(87918),N=r(55136),U=function(e){var n,r=e.onRecipientAdd,a=e.onRecipientRemove,o=e.recipients,c=void 0===o?[]:o,l=(0,k.Z)(e,["onRecipientAdd","onRecipientRemove","recipients"]),u=(0,i.useRef)(null),h=(0,t.Z)((0,i.useState)(!1),2),p=h[0],Z=h[1],v=(0,t.Z)((0,i.useState)(""),2),g=v[0],y=v[1],w=(0,t.Z)((0,i.useState)([]),2),S=w[0],U=w[1],H=!!(p&&g),L=S.length>0,O=(0,i.useCallback)((n=(0,b.Z)(function(e){var n,r,t;return(0,C.__generator)(this,function(s){switch(s.label){case 0:if(y(n=e.target.value),!n)return U([]),[2];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,chatApi.getContacts({query:n})];case 2:return r=s.sent(),t=c.map(function(e){return e.id}),U(r.filter(function(e){return!t.includes(e.id)})),[3,4];case 3:return console.error(s.sent()),[3,4];case 4:return[2]}})}),function(e){return n.apply(this,arguments)}),[c]),D=(0,i.useCallback)(function(){H&&Z(!1)},[H]),B=(0,i.useCallback)(function(){Z(!0)},[]),z=(0,i.useCallback)(function(e){y(""),null==r||r(e)},[r]);return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(x.Z,(0,m.Z)((0,j.Z)({},l),{children:(0,s.jsx)(N.L,{children:(0,s.jsxs)(x.Z,{sx:{alignItems:"center",display:"flex",p:2},children:[(0,s.jsx)(A.Z,{onClickAway:D,children:(0,s.jsxs)(x.Z,{sx:{mr:1},children:[(0,s.jsx)(T.Z,{fullWidth:!0,onChange:O,onFocus:B,placeholder:"Search contacts",ref:u,startAdornment:(0,s.jsx)(I.Z,{position:"start",children:(0,s.jsx)(f.Z,{children:(0,s.jsx)(R.Z,{})})}),sx:{"&.MuiInputBase-root":{height:40,minWidth:260}},value:g}),H&&(0,s.jsx)(_.Z,{anchorEl:u.current,open:p,placement:"bottom-start",children:(0,s.jsx)(P.Z,{elevation:16,sx:{borderColor:"divider",borderStyle:"solid",borderWidth:1,maxWidth:"100%",mt:1,width:320},children:L?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.Z,{sx:{px:2,pt:2},children:(0,s.jsx)(d.Z,{color:"text.secondary",variant:"subtitle2",children:"Contacts"})}),(0,s.jsx)(E.Z,{children:S.map(function(e){return(0,s.jsxs)(F.Z,{onClick:function(){return z(e)},children:[(0,s.jsx)(W.Z,{children:(0,s.jsx)(q.Z,{src:e.avatar})}),(0,s.jsx)(K.Z,{primary:e.name,primaryTypographyProps:{noWrap:!0,variant:"subtitle2"}})]},e.id)})})]}):(0,s.jsxs)(x.Z,{sx:{p:2,textAlign:"center"},children:[(0,s.jsx)(d.Z,{gutterBottom:!0,variant:"h6",children:"Nothing Found"}),(0,s.jsxs)(d.Z,{color:"text.secondary",variant:"body2",children:["We couldn't find any matches for \"",g,'". Try checking for typos or using complete words.']})]})})})]})}),(0,s.jsx)(d.Z,{color:"text.secondary",sx:{mr:2},variant:"body2",children:"To:"}),(0,s.jsx)(M.Z,{alignItems:"center",direction:"row",spacing:2,children:c.map(function(e){return(0,s.jsx)(G.Z,{avatar:(0,s.jsx)(q.Z,{src:e.avatar}),label:e.name,onDelete:function(){return null==a?void 0:a(e.id)}},e.id)})})]})})}))})};U.propTypes={onRecipientAdd:S().func,onRecipientRemove:S().func,recipients:S().array};var H=r(35485),L=r(51647),O=r(3753),D=r(34386),B=function(e){var n=e.disabled,r=e.onSend,a=(0,k.Z)(e,["disabled","onSend"]),o=(0,i.useRef)(null),c=(0,t.Z)((0,i.useState)(""),2),l=c[0],u=c[1],d=(0,i.useCallback)(function(){var e;null===(e=o.current)||void 0===e||e.click()},[]),h=(0,i.useCallback)(function(e){u(e.target.value)},[]),Z=(0,i.useCallback)(function(){l&&(null==r||r(l),u(""))},[l,r]),v=(0,i.useCallback)(function(e){"Enter"===e.code&&Z()},[Z]);return(0,s.jsxs)(M.Z,(0,m.Z)((0,j.Z)({alignItems:"center",direction:"row",spacing:2,sx:{px:3,py:1}},a),{children:[(0,s.jsx)(q.Z,{sx:{display:{xs:"none",sm:"inline"}},src:"/assets/avatar-anika-visser.png"}),(0,s.jsx)(T.Z,{disabled:n,fullWidth:!0,onChange:h,onKeyUp:v,placeholder:"Leave a message",size:"small",value:l}),(0,s.jsxs)(x.Z,{sx:{alignItems:"center",display:"flex",m:-2,ml:2},children:[(0,s.jsx)(D.Z,{title:"Send",children:(0,s.jsx)(x.Z,{sx:{m:1},children:(0,s.jsx)(p.Z,{color:"primary",disabled:!l||n,sx:{backgroundColor:"primary.main",color:"primary.contrastText","&:hover":{backgroundColor:"primary.dark"}},onClick:Z,children:(0,s.jsx)(f.Z,{children:(0,s.jsx)(O.Z,{})})})})}),(0,s.jsx)(D.Z,{title:"Attach photo",children:(0,s.jsx)(x.Z,{sx:{display:{xs:"none",sm:"inline-flex"},m:1},children:(0,s.jsx)(p.Z,{disabled:n,edge:"end",onClick:d,children:(0,s.jsx)(f.Z,{children:(0,s.jsx)(L.Z,{})})})})}),(0,s.jsx)(D.Z,{title:"Attach file",children:(0,s.jsx)(x.Z,{sx:{display:{xs:"none",sm:"inline-flex"},m:1},children:(0,s.jsx)(p.Z,{disabled:n,edge:"end",onClick:d,children:(0,s.jsx)(f.Z,{children:(0,s.jsx)(H.Z,{})})})})})]}),(0,s.jsx)("input",{hidden:!0,ref:o,type:"file"})]}))};B.propTypes={disabled:S().bool,onSend:S().func},B.defaultProps={disabled:!1};var z=function(){var e=(0,t.Z)((0,i.useState)([]),2),n=e[0],r=e[1];return{onRecipientAdd:(0,i.useCallback)(function(e){r(function(n){return n.find(function(n){return n.id===e.id})?n:(0,v.Z)(n).concat([e])})},[]),onRecipientRemove:(0,i.useCallback)(function(e){r(function(n){return n.filter(function(n){return n.id!==e})})},[]),recipients:n}},X=function(e){(0,y.I0)(),(0,c.useRouter)();var n=z(),r=n.onRecipientAdd,t=n.onRecipientRemove,i=n.recipients,a=i.length>0;return(0,s.jsxs)(x.Z,(0,m.Z)((0,j.Z)({sx:{display:"flex",flexDirection:"column",flexGrow:1}},e),{children:[(0,s.jsx)(U,{onRecipientAdd:r,onRecipientRemove:t,recipients:i}),(0,s.jsx)(h.Z,{}),(0,s.jsx)(x.Z,{sx:{flexGrow:1}}),(0,s.jsx)(h.Z,{}),(0,s.jsx)(B,{disabled:!a,onSend:function(){}})]}))},J=r(14924),Q=(0,r(90948).ZP)("div",{shouldForwardProp:function(e){return"open"!==e}})(function(e){var n,r,t=e.theme,s=e.open;return(0,j.Z)((n={display:"flex",flexDirection:"column",flexGrow:1,overflow:"hidden"},(0,J.Z)(n,t.breakpoints.up("md"),{marginLeft:-380}),(0,J.Z)(n,"transition",t.transitions.create("margin",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})),n),s&&(r={},(0,J.Z)(r,t.breakpoints.up("md"),{marginLeft:0}),(0,J.Z)(r,"transition",t.transitions.create("margin",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen})),r))}),V=r(10216),Y=r(45331),$=r(83321),ee=r(77533),en=r(43242),er=(0,i.forwardRef)(function(e,n){var r=e.isFocused,t=e.onChange,a=e.onClickAway,o=e.onFocus,c=e.onSelect,l=e.query,u=void 0===l?"":l,h=e.results,p=void 0===h?[]:h,Z=(0,k.Z)(e,["isFocused","onChange","onClickAway","onFocus","onSelect","query","results"]),v=(0,i.useCallback)(function(e){null==c||c(e)},[c]),g=p.length>0;return(0,s.jsx)(A.Z,{onClickAway:void 0===a?function(){}:a,children:(0,s.jsxs)(x.Z,(0,m.Z)((0,j.Z)({ref:n,sx:{p:2}},Z),{children:[(0,s.jsx)(T.Z,{fullWidth:!0,onChange:t,onFocus:o,placeholder:"Search contacts",startAdornment:(0,s.jsx)(I.Z,{position:"start",children:(0,s.jsx)(f.Z,{children:(0,s.jsx)(R.Z,{})})}),value:u}),r&&!u&&(0,s.jsx)(x.Z,{sx:{py:2},children:(0,s.jsx)(en.C,{message:"Enter a contact name"})}),r&&u&&(0,s.jsx)(s.Fragment,{children:g?(0,s.jsxs)(x.Z,{sx:{py:2},children:[(0,s.jsx)(d.Z,{color:"text.secondary",variant:"subtitle2",children:"Contacts"}),(0,s.jsx)(E.Z,{children:p.map(function(e){return(0,s.jsxs)(F.Z,{onClick:function(){return v(e)},children:[(0,s.jsx)(W.Z,{children:(0,s.jsx)(q.Z,{src:e.avatar,sx:{height:32,width:32}})}),(0,s.jsx)(K.Z,{primary:e.name,primaryTypographyProps:{noWrap:!0,variant:"subtitle2"}})]},e.id)})})]}):(0,s.jsx)(x.Z,{sx:{py:2},children:(0,s.jsxs)(d.Z,{color:"text.secondary",variant:"body2",children:["We couldn't find any matches for \"",u,'". Try checking for typos or using complete words.']})})})]}))})});er.propTypes={isFocused:S().bool,onChange:S().func,onClickAway:S().func,onFocus:S().func,onSelect:S().func,query:S().string,results:S().array};var et=r(1153),es=r(51107),ei=r(54801),ea=function(e){var n;return null===(n=e.messages)||void 0===n?void 0:n[e.messages.length-1]},eo=function(e,n){if(!n)return"";var r=n.authorId===e?"Me: ":"",t="image"===n.contentType?"Sent a photo":n.body;return"".concat(r).concat(t)},ec=function(e){var n,r,t=e.active,i=e.thread,a=e.onSelect,o=(0,k.Z)(e,["active","thread","onSelect"]),c=useMockedUser(),l=(n=i.participants||[],r=c.id,n.filter(function(e){return e.id!==r})),u=ea(i),h=u?(0,et.Z)(u.createdAt,new Date,{addSuffix:!1,locale:customLocale}):null,p=l.map(function(e){return e.name}).join(", "),f=eo(c.id,u),Z=l.length>1,v=!!(i.unreadCount&&i.unreadCount>0);return(0,s.jsxs)(M.Z,(0,m.Z)((0,j.Z)({component:"li",direction:"row",onClick:a,spacing:2,sx:(0,j.Z)({borderRadius:2.5,cursor:"pointer",px:3,py:2,"&:hover":{backgroundColor:"action.hover"}},t&&{backgroundColor:"action.hover"})},o),{children:[(0,s.jsx)("div",{children:(0,s.jsx)(es.Z,{max:2,sx:(0,J.Z)({},"& .".concat(ei.Z.root),Z?{height:26,width:26,"&:nth-of-type(2)":{mt:"10px"}}:{height:36,width:36}),children:l.map(function(e){return(0,s.jsx)(q.Z,{src:e.avatar||void 0},e.id)})})}),(0,s.jsxs)(x.Z,{sx:{flexGrow:1,overflow:"hidden"},children:[(0,s.jsx)(d.Z,{noWrap:!0,variant:"subtitle2",children:p}),(0,s.jsxs)(M.Z,{alignItems:"center",direction:"row",spacing:1,children:[v&&(0,s.jsx)(x.Z,{sx:{backgroundColor:"primary.main",borderRadius:"50%",height:8,width:8}}),(0,s.jsx)(d.Z,{color:"text.secondary",noWrap:!0,sx:{flexGrow:1},variant:"subtitle2",children:f})]})]}),h&&(0,s.jsx)(d.Z,{color:"text.secondary",sx:{whiteSpace:"nowrap"},variant:"caption",children:h})]}))};ec.propTypes={active:S().bool,onSelect:S().func,thread:S().object.isRequired},ec.defaultProps={active:!1};var el=function(e){var n,r=e.container,a=e.onClose,o=e.open,l=(0,k.Z)(e,["container","onClose","open"]),h={avatar:"/assets/avatar-anika-visser.png"},Z=(0,c.useRouter)(),v=(0,t.Z)((0,i.useState)(!1),2),y=v[0],w=v[1],S=(0,t.Z)((0,i.useState)(""),2),R=S[0],A=S[1],T=(0,t.Z)((0,i.useState)([]),2),I=T[0],_=T[1],P=(0,u.Z)(function(e){return e.breakpoints.up("md")}),E=(0,i.useCallback)(function(){Z.push(g.H.dashboard.support+"?compose=true")},[Z]),F=(0,i.useCallback)((n=(0,b.Z)(function(e){var n;return(0,C.__generator)(this,function(r){switch(r.label){case 0:if(A(n=e.target.value),!n)return _([]),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,chatApi.getContacts({query:n})];case 2:return _(r.sent()),[3,4];case 3:return console.error(r.sent()),[3,4];case 4:return[2]}})}),function(e){return n.apply(this,arguments)}),[]),W=(0,i.useCallback)(function(){y&&(w(!1),A(""))},[y]),q=(0,i.useCallback)(function(){w(!0)},[]),K=(0,i.useCallback)(function(e){var n=e.id;w(!1),A(""),Z.push(g.H.dashboard.support+"?threadKey=".concat(n))},[Z]);(0,i.useCallback)(function(e){var n,r,t=(n=threads.byId[e],r=h.id,"GROUP"===n.type?n.id:n.participantIds.find(function(e){return e!==r}));t?Z.push(g.H.dashboard.support+"?threadKey=".concat(t)):Z.push(g.H.dashboard.support)},[Z,h]);var G=(0,s.jsxs)(x.Z,{sx:{position:"sticky",top:0},children:[(0,s.jsxs)(M.Z,{alignItems:"center",direction:"row",spacing:2,sx:{p:2},children:[(0,s.jsx)(d.Z,{variant:"h5",sx:{flexGrow:1},children:"Chats"}),(0,s.jsx)($.Z,{onClick:E,startIcon:(0,s.jsx)(f.Z,{children:(0,s.jsx)(V.Z,{})}),variant:"contained",children:"Group"}),!P&&(0,s.jsx)(p.Z,{onClick:a,children:(0,s.jsx)(f.Z,{children:(0,s.jsx)(Y.Z,{})})})]}),(0,s.jsx)(er,{isFocused:y,onChange:F,onClickAway:W,onFocus:q,onSelect:K,query:R,results:I}),(0,s.jsx)(x.Z,{sx:{display:y?"none":"block"},children:(0,s.jsx)(N.L,{children:(0,s.jsx)(M.Z,{component:"ul",spacing:.5,sx:{listStyle:"none",m:0,p:2}})})})]});return P?(0,s.jsx)(ee.ZP,(0,m.Z)((0,j.Z)({anchor:"left",open:o,PaperProps:{sx:{position:"relative",width:380,zIndex:0}},SlideProps:{container:r},variant:"persistent"},l),{children:G})):(0,s.jsx)(ee.ZP,(0,m.Z)((0,j.Z)({anchor:"left",hideBackdrop:!0,ModalProps:{container:r,sx:{pointerEvents:"none",position:"absolute"}},onClose:a,open:o,PaperProps:{sx:{maxWidth:"100%",width:380,pointerEvents:"auto",position:"absolute"}},SlideProps:{container:r},variant:"temporary"},l),{children:G}))};el.propTypes={container:S().any,onClose:S().func,open:S().bool};var eu=r(44086),ed=r(66242),eh=r(23795),ex=r(83965),ep=function(e){var n=e.authorAvatar,r=e.authorName,t=e.body,i=e.contentType,a=e.createdAt,o=e.position,c=(0,k.Z)(e,["authorAvatar","authorName","body","contentType","createdAt","position"]),l=(0,eu.Z)(a);return(0,s.jsx)(x.Z,(0,m.Z)((0,j.Z)({sx:{display:"flex",alignItems:"right"===o?"flex-end":"flex-start"}},c),{children:(0,s.jsxs)(M.Z,{alignItems:"flex-start",direction:"right"===o?"row-reverse":"row",spacing:2,sx:{maxWidth:500,ml:"right"===o?"auto":0,mr:"left"===o?"auto":0},children:[(0,s.jsx)(q.Z,{src:n||void 0,sx:{height:32,width:32}}),(0,s.jsxs)(x.Z,{sx:{flexGrow:1},children:[(0,s.jsxs)(ed.Z,{sx:{backgroundColor:"right"===o?"primary.main":"background.paper",color:"right"===o?"primary.contrastText":"text.primary",px:2,py:1},children:[(0,s.jsx)(x.Z,{sx:{mb:1},children:(0,s.jsx)(eh.Z,{color:"inherit",sx:{cursor:"pointer"},variant:"subtitle2",children:r})}),"image"===i&&(0,s.jsx)(ex.Z,{onClick:function(){},image:t,sx:{height:200,width:200}}),"text"===i&&(0,s.jsx)(d.Z,{color:"inherit",variant:"body1",children:t})]}),(0,s.jsx)(x.Z,{sx:{display:"flex",justifyContent:"right"===o?"flex-end":"flex-start",mt:1,px:2},children:(0,s.jsxs)(d.Z,{color:"text.secondary",noWrap:!0,variant:"caption",children:[l," ","ago"]})})]})]})}))};ep.propTypes={authorAvatar:S().string.isRequired,authorName:S().string.isRequired,body:S().string.isRequired,contentType:S().string.isRequired,createdAt:S().number.isRequired,position:S().oneOf(["left","right"])};var ef=function(e,n,r){var t=n.find(function(n){return n.id===e.authorId});return t?e.authorId===r.id?{name:"Me",avatar:r.avatar,isUser:!0}:{avatar:t.avatar,name:t.name,isUser:!1}:{name:"Unknown",avatar:"",isUser:!1}},eZ=function(e){var n=e.messages,r=e.participants,t=(0,k.Z)(e,["messages","participants"]),i=useMockedUser();return(0,s.jsx)(M.Z,(0,m.Z)((0,j.Z)({spacing:2,sx:{p:3}},t),{children:n.map(function(e){var n=ef(e,r,i);return(0,s.jsx)(ep,{authorAvatar:n.avatar,authorName:n.name,body:e.body,contentType:e.contentType,createdAt:e.createdAt,position:n.isUser?"right":"left"},e.id)})}))};eZ.propTypes={messages:S().array,participants:S().array};var ej=r(97512),em=r(46621),ev=r(83075),eg=r(12046),ey=r(12963),eb=r(72591),ek=r(44347),eC=r(18972),ew=r(48885),eS=function(e){var n,r=e.participants,a=(0,k.Z)(e,["participants"]),o=useMockedUser(),c=(0,i.useRef)(null),l=(0,t.Z)((0,i.useState)(!1),2),u=l[0],h=l[1],x=(0,i.useCallback)(function(){h(!0)},[]),Z=(0,i.useCallback)(function(){h(!1)},[]),v=(n=o.id,(void 0===r?[]:r).filter(function(e){return e.id!==n})),g=v.map(function(e){return e.name}).join(", "),y=1===v.length&&v[0].lastActivity?(0,eu.Z)(v[0].lastActivity,{addSuffix:!0}):null;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(M.Z,(0,m.Z)((0,j.Z)({alignItems:"center",direction:"row",justifyContent:"space-between",spacing:2,sx:{flexShrink:0,minHeight:64,px:2,py:1}},a),{children:[(0,s.jsxs)(M.Z,{alignItems:"center",direction:"row",spacing:2,children:[(0,s.jsx)(es.Z,{max:2,sx:(0,j.Z)({},v.length>1&&{"& .MuiAvatar-root":{height:30,width:30,"&:nth-of-type(2)":{mt:"10px"}}}),children:v.map(function(e){return(0,s.jsx)(q.Z,{src:e.avatar||void 0},e.id)})}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d.Z,{variant:"subtitle2",children:g}),y&&(0,s.jsxs)(d.Z,{color:"text.secondary",variant:"caption",children:["Last active"," ",y]})]})]}),(0,s.jsxs)(M.Z,{alignItems:"center",direction:"row",spacing:1,children:[(0,s.jsx)(p.Z,{children:(0,s.jsx)(f.Z,{children:(0,s.jsx)(eg.Z,{})})}),(0,s.jsx)(p.Z,{children:(0,s.jsx)(f.Z,{children:(0,s.jsx)(L.Z,{})})}),(0,s.jsx)(D.Z,{title:"More options",children:(0,s.jsx)(p.Z,{onClick:x,ref:c,children:(0,s.jsx)(f.Z,{children:(0,s.jsx)(ev.Z,{})})})})]})]})),(0,s.jsxs)(ek.Z,{anchorEl:c.current,keepMounted:!0,onClose:Z,open:u,children:[(0,s.jsxs)(eC.Z,{children:[(0,s.jsx)(ew.Z,{children:(0,s.jsx)(f.Z,{children:(0,s.jsx)(ey.Z,{})})}),(0,s.jsx)(K.Z,{primary:"Block"})]}),(0,s.jsxs)(eC.Z,{children:[(0,s.jsx)(ew.Z,{children:(0,s.jsx)(f.Z,{children:(0,s.jsx)(eb.Z,{})})}),(0,s.jsx)(K.Z,{primary:"Delete"})]}),(0,s.jsxs)(eC.Z,{children:[(0,s.jsx)(ew.Z,{children:(0,s.jsx)(f.Z,{children:(0,s.jsx)(ej.Z,{})})}),(0,s.jsx)(K.Z,{primary:"Archive"})]}),(0,s.jsxs)(eC.Z,{children:[(0,s.jsx)(ew.Z,{children:(0,s.jsx)(f.Z,{children:(0,s.jsx)(em.Z,{})})}),(0,s.jsx)(K.Z,{primary:"Mute"})]})]})]})};eS.propTypes={participants:S().array};var eR=function(e){var n=(0,c.useRouter)(),r=(0,t.Z)((0,i.useState)([]),2),s=r[0],a=r[1],o=(0,i.useCallback)((0,b.Z)(function(){return(0,C.__generator)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,chatApi.getParticipants({threadKey:e})];case 1:return a(r.sent()),[3,3];case 2:return console.error(r.sent()),n.push(g.H.dashboard.support),[3,3];case 3:return[2]}})}),[n,e]);return(0,i.useEffect)(function(){o()},[e]),s},eA=function(e){var n=(0,c.useRouter)(),r=(0,y.I0)(),t=(0,y.v9)(function(e){var n=e.chat,r=n.threads,t=n.currentThreadId;return r.byId[t]}),s=(0,i.useCallback)((0,b.Z)(function(){var t;return(0,C.__generator)(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,r(thunks.getThread({threadKey:e}))];case 1:return t=s.sent(),[3,3];case 2:return console.error(s.sent()),n.push(g.H.dashboard.support),[2];case 3:return r(thunks.setCurrentThread({threadId:t})),t&&r(thunks.markThreadAsSeen({threadId:t})),[2]}})}),[n,r,e]);return(0,i.useEffect)(function(){s()},[e]),t},eT=function(e){var n=(0,i.useRef)(null),r=(0,i.useCallback)(function(){if(e&&n.current){var r=n.current;r.getScrollElement().scrollTop=r.el.scrollHeight}},[e]);return(0,i.useEffect)(function(){r()},[e]),{messagesRef:n}},eI=function(e){var n,r=e.threadKey,t=(0,k.Z)(e,["threadKey"]),a=(0,y.I0)(),o=eA(r),c=eR(r),l=eT(o).messagesRef,u=(0,i.useCallback)((n=(0,b.Z)(function(e){var n,r;return(0,C.__generator)(this,function(t){switch(t.label){case 0:if(!o)return[3,5];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,a(thunks.addMessage({threadId:o.id,body:e}))];case 2:return t.sent(),[3,4];case 3:return console.error(t.sent()),[3,4];case 4:return[2];case 5:n=c.filter(function(e){return e.id!==user.id}).map(function(e){return e.id}),t.label=6;case 6:return t.trys.push([6,8,,9]),[4,a(thunks.addMessage({recipientIds:n,body:e}))];case 7:return r=t.sent(),[3,9];case 8:case 11:return console.error(t.sent()),[2];case 9:return t.trys.push([9,11,,12]),[4,a(thunks.getThread({threadKey:r}))];case 10:return t.sent(),[3,12];case 12:return a(thunks.setCurrentThread({threadId:r})),[2]}})}),function(e){return n.apply(this,arguments)}),[a,c,o,user]);return(0,s.jsxs)(M.Z,(0,m.Z)((0,j.Z)({sx:{flexGrow:1,overflow:"hidden"}},t),{children:[(0,s.jsx)(eS,{participants:c}),(0,s.jsx)(h.Z,{}),(0,s.jsx)(x.Z,{sx:{flexGrow:1,overflow:"hidden"},children:(0,s.jsx)(N.L,{ref:l,sx:{maxHeight:"100%"},children:(0,s.jsx)(eZ,{messages:(null==o?void 0:o.messages)||[],participants:(null==o?void 0:o.participants)||[]})})}),(0,s.jsx)(h.Z,{}),(0,s.jsx)(B,{onSend:u})]}))};eI.propTypes={threadKey:S().string.isRequired};var e_=function(){var e=(0,c.useSearchParams)();return{compose:"true"===e.get("compose"),threadKey:e.get("threadKey")||void 0}},eP=function(){var e=(0,c.useSearchParams)(),n=(0,u.Z)(function(e){return e.breakpoints.up("md")}),r=(0,t.Z)((0,i.useState)(n),2),s=r[0],a=r[1],o=(0,i.useCallback)(function(){n?a(!0):a(!1)},[n]);(0,i.useEffect)(function(){o()},[n]);var l=(0,i.useCallback)(function(){n||a(!1)},[n]);return(0,i.useEffect)(function(){l()},[e]),{isOpen:s,handleToggle:(0,i.useCallback)(function(){a(function(e){return!e})},[]),handleClose:(0,i.useCallback)(function(){a(!1)},[])}},eE=function(){var e=(0,i.useRef)(null),n=e_(),r=n.compose,t=n.threadKey,a=eP(),c=t?"thread":r?"compose":"blank";return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o(),{children:(0,s.jsx)("title",{children:"Support"})}),(0,s.jsx)(d.Z,{sx:{mb:4},variant:"h4",children:"Support"}),(0,s.jsx)(h.Z,{}),(0,s.jsxs)(x.Z,{ref:e,sx:{display:"flex"},children:[(0,s.jsx)(el,{container:e.current,onClose:a.handleClose,open:a.isOpen}),(0,s.jsxs)(Q,{open:a.isOpen,children:[(0,s.jsx)(x.Z,{sx:{p:2},children:(0,s.jsx)(p.Z,{onClick:a.handleToggle,children:(0,s.jsx)(f.Z,{children:(0,s.jsx)(l.Z,{})})})}),(0,s.jsx)(h.Z,{}),"thread"===c&&(0,s.jsx)(eI,{threadKey:t}),"compose"===c&&(0,s.jsx)(X,{}),"blank"===c&&(0,s.jsx)(Z,{})]})]})]})}}},function(e){e.O(0,[157,774,888,179],function(){return e(e.s=97294)}),_N_E=e.O()}]);