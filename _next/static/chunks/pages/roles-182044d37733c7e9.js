(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[217],{99226:function(e,n,t){"use strict";var i=t(82066),r=t(85893);n.Z=(0,i.Z)((0,r.jsx)("path",{d:"m20.54 5.23-1.39-1.68C18.88 3.21 18.47 3 18 3H6c-.47 0-.88.21-1.16.55L3.46 5.23C3.17 5.57 3 6.02 3 6.5V19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6.5c0-.48-.17-.93-.46-1.27zM6.24 5h11.52l.81.97H5.44l.8-.97zM5 19V8h14v11H5zm8.45-9h-2.9v3H8l4 4 4-4h-2.55z"}),"ArchiveOutlined")},95537:function(e,n,t){"use strict";var i=t(82066),r=t(85893);n.Z=(0,i.Z)((0,r.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},60666:function(e,n,t){"use strict";var i=t(82066),r=t(85893);n.Z=(0,i.Z)((0,r.jsx)("path",{d:"m14.06 9.02.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"}),"EditOutlined")},75471:function(e,n,t){"use strict";var i=t(82066),r=t(85893);n.Z=(0,i.Z)((0,r.jsx)("path",{d:"m20.54 5.23-1.39-1.68C18.88 3.21 18.47 3 18 3H6c-.47 0-.88.21-1.16.55L3.46 5.23C3.17 5.57 3 6.02 3 6.5V19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6.5c0-.48-.17-.93-.46-1.27zM6.24 5h11.52l.83 1H5.42l.82-1zM5 19V8h14v11H5zm3-5h2.55v3h2.9v-3H16l-4-4z"}),"UnarchiveOutlined")},31425:function(e,n,t){"use strict";t.d(n,{Z:function(){return g}});var i=t(63366),r=t(87462),a=t(67294),l=t(86010),s=t(94780),o=t(90948),c=t(71657),u=t(1588),d=t(34867);function h(e){return(0,d.Z)("MuiDialogActions",e)}(0,u.Z)("MuiDialogActions",["root","spacing"]);var Z=t(85893);let x=["className","disableSpacing"],p=e=>{let{classes:n,disableSpacing:t}=e;return(0,s.Z)({root:["root",!t&&"spacing"]},h,n)},f=(0,o.ZP)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,n)=>{let{ownerState:t}=e;return[n.root,!t.disableSpacing&&n.spacing]}})(({ownerState:e})=>(0,r.Z)({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!e.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})),m=a.forwardRef(function(e,n){let t=(0,c.Z)({props:e,name:"MuiDialogActions"}),{className:a,disableSpacing:s=!1}=t,o=(0,i.Z)(t,x),u=(0,r.Z)({},t,{disableSpacing:s}),d=p(u);return(0,Z.jsx)(f,(0,r.Z)({className:(0,l.Z)(d.root,a),ownerState:u,ref:n},o))});var g=m},37645:function(e,n,t){"use strict";var i=t(87462),r=t(63366),a=t(67294),l=t(86010),s=t(94780),o=t(15861),c=t(90948),u=t(71657),d=t(4472),h=t(34182),Z=t(85893);let x=["className","id"],p=e=>{let{classes:n}=e;return(0,s.Z)({root:["root"]},d.a,n)},f=(0,c.ZP)(o.Z,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,n)=>n.root})({padding:"16px 24px",flex:"0 0 auto"}),m=a.forwardRef(function(e,n){let t=(0,u.Z)({props:e,name:"MuiDialogTitle"}),{className:s,id:o}=t,c=(0,r.Z)(t,x),d=p(t),{titleId:m=o}=a.useContext(h.Z);return(0,Z.jsx)(f,(0,i.Z)({component:"h2",className:(0,l.Z)(d.root,s),ownerState:t,ref:n,variant:"h6",id:m},c))});n.Z=m},36115:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/roles",function(){return t(95284)}])},62077:function(e,n,t){"use strict";t.d(n,{a:function(){return o}});var i=t(26042),r=t(99534),a=t(85893),l=t(87357),s=t(98456),o=function(e){var n=e.backdrop,t=e.sx;(0,r.Z)(e,["backdrop","sx"]);var o=(0,a.jsx)(l.Z,{sx:(0,i.Z)({position:"absolute",bottom:0,top:0,left:0,right:0,bgcolor:n?"rgb(0 0 1 / 30%)":"transparent",zIndex:100,display:"flex",justifyContent:"center",alignItems:"center"},t),children:(0,a.jsx)(s.Z,{disableShrink:!0,color:"primary"})});return(0,a.jsx)(a.Fragment,{children:o})}},3174:function(e,n,t){"use strict";t.d(n,{t:function(){return l}});var i=t(99534),r=t(85893),a=t(8896),l=function(e){var n=e.limit,t=e.total,l=e.page,s=e.onPageChange,o=e.onLimitChange;return(0,i.Z)(e,["limit","total","page","onPageChange","onLimitChange"]),(0,r.jsx)(a.Z,{component:"div",count:t,onPageChange:s,onRowsPerPageChange:o,page:l-1,rowsPerPage:n,rowsPerPageOptions:[10,25,50]})}},83594:function(e,n,t){"use strict";t.d(n,{h:function(){return s}});var i=t(26042),r=t(69396),a=t(828);t(11163),t(44795);var l=t(67294),s=function(){var e=(0,a.Z)((0,l.useState)({page:1,limit:10,offset:0}),2),n=e[0],t=e[1],s=(0,l.useCallback)(function(e,n){t(function(e){return(0,r.Z)((0,i.Z)({},e),{page:n+1,offset:n*e.limit})})},[]),o=(0,l.useCallback)(function(e){t(function(n){return(0,r.Z)((0,i.Z)({},n),{page:1,limit:parseInt(e.target.value,10),offset:0})})},[]);return(0,r.Z)((0,i.Z)({},n),{handlePageChange:s,handleLimitChange:o})}},95284:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return ec}});var i,r=t(47568),a=t(26042),l=t(828),s=t(70655),o=t(85893),c=t(67294),u=t(10216),d=t(26447),h=t(15861),Z=t(83321),x=t(53219),p=t(66242),f=t(69396),m=t(99534),g=t(41664),v=t.n(g),j=t(45697),C=t.n(j),b=t(75471),w=t(99226),k=t(60666),P=t(95537),S=t(87357),R=t(7906),y=t(295),L=t(68509),z=t(98102),_=t(53184),M=t(23795),A=t(34386),H=t(93946),N=t(64666),I=t(37645),D=t(6514),E=t(31425),F=t(87918),W=t(55136),T=t(93041),V=t(3174),q=t(62077),O=t(92951),U=function(e){var n,t,i,r,s,u,p=e.items,g=e.total,j=e.onPageChange,C=e.handleLimitChange,U=e.page,B=e.limit,G=e.loading,X=e.handleStatus,J=e.userRole,K=(0,m.Z)(e,["items","total","onPageChange","handleLimitChange","page","limit","loading","handleStatus","userRole"]),Q=(0,l.Z)((0,c.useState)({open:!1,item:null}),2),Y=Q[0],$=Q[1],ee=(0,l.Z)((0,c.useState)({open:!1,item:null}),2),en=ee[0],et=ee[1];(0,O.P)().data;var ei=(0,c.useCallback)(function(e){$({open:!0,item:e})},[]),er=(0,c.useCallback)(function(e){et({open:!0,item:e})},[]),ea=(0,c.useCallback)(function(){$({open:!1,item:null})},[]),el=(0,c.useCallback)(function(){et({open:!1,item:null})},[]);return(0,o.jsxs)(S.Z,(0,f.Z)((0,a.Z)({sx:{position:"relative"}},K),{children:[(0,o.jsx)(W.L,{children:(0,o.jsxs)(R.Z,{sx:{minWidth:700},children:[G&&!p.length&&(0,o.jsx)(y.Z,{children:(0,o.jsx)(L.Z,{children:(0,o.jsx)(z.Z,{children:(0,o.jsx)(S.Z,{sx:{position:"relative",width:"100%",height:"200px"},children:(0,o.jsx)(q.a,{})})})})}),!G&&!p.length&&(0,o.jsx)(y.Z,{children:(0,o.jsx)(L.Z,{children:(0,o.jsx)(z.Z,{align:"center",children:(0,o.jsx)(h.Z,{variant:"subtitle2",children:"Nothing found"})})})}),!!p.length&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(_.Z,{children:(0,o.jsxs)(L.Z,{children:[(0,o.jsx)(z.Z,{children:"ID"}),(0,o.jsx)(z.Z,{children:"Name"}),(0,o.jsx)(z.Z,{children:"Description"}),(0,o.jsx)(z.Z,{children:"Grants"}),(0,o.jsx)(z.Z,{children:"Status"}),0===J&&(0,o.jsx)(z.Z,{align:"right",children:"Actions"})]})}),(0,o.jsx)(y.Z,{children:p.map(function(e){return(0,o.jsxs)(L.Z,{hover:!0,children:[(0,o.jsx)(z.Z,{children:e.id}),(0,o.jsx)(z.Z,{children:0===J?(0,o.jsx)(M.Z,{color:"inherit",component:v(),href:"".concat(T.H.roles.index,"/").concat(e.id),variant:"subtitle2",children:e.name}):e.name}),(0,o.jsx)(z.Z,{children:e.description}),(0,o.jsx)(z.Z,{children:(0,o.jsx)(M.Z,{href:"#",onClick:function(n){n.preventDefault(),er(e)},variant:"text",children:"Show"})}),(0,o.jsx)(z.Z,{children:(0,o.jsx)(h.Z,{sx:{textTransform:"capitalize",color:"active"===e.status?"success.main":"error.main"},children:e.status})}),0===J&&(0,o.jsxs)(z.Z,{align:"right",children:[(0,o.jsx)(A.Z,{title:"active"===e.status?"Archive":"Unzip",children:(0,o.jsx)(H.Z,{onClick:function(){ei(e)},children:(0,o.jsx)(x.Z,{color:"archived"===e.status?"success":"error",children:"archived"===e.status?(0,o.jsx)(b.Z,{}):(0,o.jsx)(w.Z,{})})})}),(0,o.jsx)(A.Z,{title:"Edit",children:(0,o.jsx)(H.Z,{component:v(),href:"".concat(T.H.roles.index,"/").concat(e.id),children:(0,o.jsx)(x.Z,{color:"primary",children:(0,o.jsx)(k.Z,{})})})})]})]},e.id)})})]})]})}),(0,o.jsx)(V.t,{limit:B,total:g,page:U,onPageChange:j,onLimitChange:C}),(0,o.jsxs)(N.Z,{open:Y.open,onClose:ea,scroll:"paper",maxWidth:"sm",fullWidth:!0,children:[(0,o.jsxs)(I.Z,{sx:{pr:10},children:[(0,o.jsx)(H.Z,{"aria-label":"close",onClick:ea,sx:{position:"absolute",right:8,top:8,color:function(e){return e.palette.primary.main}},children:(0,o.jsx)(P.Z,{})}),Y.item&&((null===(n=Y.item)||void 0===n?void 0:n.status)==="active"?"Archive role #".concat(null===(t=Y.item)||void 0===t?void 0:t.id,"?"):"Unzip role #".concat(null===(i=Y.item)||void 0===i?void 0:i.id,"?"))]}),(0,o.jsxs)(D.Z,{dividers:!0,children:[Y.item&&"Role "," ",(0,o.jsx)(h.Z,{component:"span",variant:"subtitle1",children:Y.item&&(null===(r=Y.item)||void 0===r?void 0:r.name)})]}),(0,o.jsxs)(E.Z,{children:[(0,o.jsx)(Z.Z,{type:"button",variant:"outlined",color:"error",onClick:ea,children:"Cancel"}),(0,o.jsx)(Z.Z,{type:"button",variant:"contained",onClick:function(){var e,n;X(null===(e=Y.item)||void 0===e?void 0:e.id,null===(n=Y.item)||void 0===n?void 0:n.status,function(){ea()})},children:"Confirm"})]})]}),(0,o.jsxs)(N.Z,{open:en.open,onClose:el,scroll:"paper",maxWidth:"sm",fullWidth:!0,children:[(0,o.jsxs)(I.Z,{sx:{pr:10},children:[(0,o.jsx)(H.Z,{"aria-label":"close",onClick:el,sx:{position:"absolute",right:8,top:8,color:function(e){return e.palette.primary.main}},children:(0,o.jsx)(P.Z,{})}),null===(s=en.item)||void 0===s?void 0:s.name]}),(0,o.jsx)(D.Z,{dividers:!0,children:(0,o.jsx)(d.Z,{direction:"row",flexWrap:"wrap",sx:{gap:2},children:null===(u=en.item)||void 0===u?void 0:u.grants.map(function(e){return(0,o.jsx)(F.Z,{label:e},e)})})}),(0,o.jsx)(E.Z,{children:(0,o.jsx)(Z.Z,{type:"button",variant:"contained",onClick:el,children:"Close"})})]})]}))};U.propTypes={items:C().array.isRequired,total:C().number.isRequired,onPageChange:C().func.isRequired,handleLimitChange:C().func,page:C().number.isRequired,limit:C().number.isRequired};var B=t(95226),G=t(88409),X=t(40044),J=t(67720),K=t(57709),Q=t(87109),Y=[{label:"All",value:"all"},{label:"Active",value:"active"},{label:"Archived",value:"archived"}],$=function(e){var n=e.onFiltersChange,t=e.initialFilters,i=(0,c.useRef)(null),r=(0,l.Z)((0,c.useState)("all"),2),s=r[0],u=r[1],h=(0,l.Z)((0,c.useState)(t),2),Z=h[0],p=h[1],m=(0,c.useCallback)(function(){null==n||n(Z)},[Z,n]);(0,c.useEffect)(function(){m()},[Z,m]);var g=(0,c.useCallback)(function(e,n){u(n),p(function(e){var t=(0,f.Z)((0,a.Z)({},e),{status:n});return"all"===n&&delete t.status,t})},[]),v=(0,c.useCallback)(function(e){e.preventDefault(),p(function(e){var n;return(0,f.Z)((0,a.Z)({},e),{q:null===(n=i.current)||void 0===n?void 0:n.value})})},[]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(G.Z,{indicatorColor:"primary",onChange:g,scrollButtons:"auto",sx:{px:3},textColor:"primary",value:s,variant:"scrollable",children:Y.map(function(e){return(0,o.jsx)(X.Z,{label:e.label,value:e.value},e.value)})}),(0,o.jsx)(J.Z,{}),(0,o.jsx)(d.Z,{alignItems:"center",direction:"row",flexWrap:"wrap",spacing:3,sx:{p:3},children:(0,o.jsx)(S.Z,{component:"form",onSubmit:v,sx:{flexGrow:1},children:(0,o.jsx)(K.Z,{defaultValue:"",fullWidth:!0,inputProps:{ref:i},placeholder:"Search",startAdornment:(0,o.jsx)(Q.Z,{position:"start",children:(0,o.jsx)(x.Z,{children:(0,o.jsx)(B.Z,{})})})})})})]})};$.propTypes={onFiltersChange:C().func};var ee=t(83720),en=t(79237),et=function(e){var n=(0,ee.I0)(),t=(0,ee.v9)(function(e){return e.roles.list}),i=t.data,r=t.loading,a=t.error,l=(0,c.useCallback)(function(){e.q?n((0,en.sB)(e)):n((0,en.zZ)(e))},[e,n]);return(0,c.useEffect)(function(){l()},[e,l]),{data:i,loading:r,error:a}},ei=t(83594),er=t(39332),ea=function(e){var n=e.children,t=(0,l.Z)((0,c.useState)(!1),2),i=t[0],r=t[1],a=(0,O.P)(),s=(0,er.useRouter)(),u=(0,c.useCallback)(function(){a&&a.user&&!["admin","client"].includes(a.user.role)?s.replace("/404"):r(!0)},[a,s]);return((0,c.useEffect)(function(){u()},[a,u]),i)?(0,o.jsx)(o.Fragment,{children:n}):null};ea.propTypes={children:C().node};var el=t(4056),es=t(86501),eo=(i=function(){var e,n=(0,ee.I0)(),t=(0,O.P)(),i=t.data&&t.data.role_id,f=(0,ei.h)(),m=f.page,g=f.limit,j=f.offset,C=f.handlePageChange,b=f.handleLimitChange,w=(0,l.Z)((0,c.useState)({}),2),k=w[0],P=w[1],S=(0,c.useCallback)(function(e){P(e)},[]),R=(0,c.useMemo)(function(){return(0,a.Z)({limit:g,offset:j},k)},[g,j,k]),y=et(R),L=y.data,z=y.loading,_=L||{items:[],limit:g,total:0},M=_.items,A=_.total,H=(0,c.useCallback)((e=(0,r.Z)(function(e,t,i){var r,a,l;return(0,s.__generator)(this,function(s){switch(s.label){case 0:return[4,el.h.roles.update({id:+e,status:"archived"===t?"active":"archived"})];case 1:if(!s.sent())return[3,3];return i(),[4,el.h.roles.list(R)];case 2:return a=(r=s.sent()).result,l=r.error,a?n(en.Nw.fillRoles(a.items)):l&&es.ZP.error("Something went wrong"),[3,4];case 3:es.ZP.error("Something went wrong"),s.label=4;case 4:return[2]}})}),function(n,t,i){return e.apply(this,arguments)}),[n,R]);return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(d.Z,{spacing:4,children:[(0,o.jsxs)(d.Z,{direction:"row",justifyContent:"space-between",spacing:4,children:[(0,o.jsx)(d.Z,{spacing:1,children:(0,o.jsx)(h.Z,{variant:"h4",children:"Roles"})}),(0,o.jsx)(d.Z,{alignItems:"center",direction:"row",spacing:3,children:t.data&&0===t.data.role_id&&(0,o.jsx)(Z.Z,{component:v(),href:T.H.roles.add,startIcon:(0,o.jsx)(x.Z,{children:(0,o.jsx)(u.Z,{})}),variant:"contained",children:"Add"})})]}),(0,o.jsxs)(p.Z,{children:[(0,o.jsx)($,{onFiltersChange:S,initialFilters:k}),(0,o.jsx)(U,{items:M,total:A,onPageChange:C,handleLimitChange:b,limit:g,page:m,loading:z,handleStatus:H,userRole:i})]})]})})},function(e){return(0,o.jsx)(ea,{children:(0,o.jsx)(i,(0,a.Z)({},e))})});eo.defaultProps={title:"Roles"};var ec=eo},10216:function(e,n,t){"use strict";var i=t(87462);t(67294);var r=t(85893);n.Z=function(e){return(0,r.jsx)("svg",(0,i.Z)({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e,{children:(0,r.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v14m-7-7h14"})}))}}},function(e){e.O(0,[105,290,896,918,774,567,179],function(){return e(e.s=36115)}),_N_E=e.O()}]);