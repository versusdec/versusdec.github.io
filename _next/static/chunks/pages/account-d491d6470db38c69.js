(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[966],{84865:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account",function(){return r(91228)}])},11181:function(e,n,r){"use strict";r.d(n,{b:function(){return q}});var s=r(26042),a=r(828),o=r(36305),t=r(85893),i=r(67294),l=r(45697),c=r.n(l),u=r(50657),d=r(26447),h=r(15861),p=r(93946),x=r(53219),m=r(6514),v=r(47568),f=r(69396),Z=r(99534),g=r(20414),j=r(55162),b=r(2957),w=r(45331),y=r(87357),C=r(87952),_=r(78462),k=r(97212),S=r(48885),B=r(59334),R=r(34386),I=r(83321),P=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var r=Math.floor(Math.log(e)/Math.log(1024));return"".concat(parseFloat((e/Math.pow(1024,r)).toFixed(n<0?0:n))," ").concat(["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][r])},T={jpeg:"/assets/icons/icon-jpg.svg",jpg:"/assets/icons/icon-jpg.svg",mp4:"/assets/icons/icon-mp4.svg",pdf:"/assets/icons/icon-pdf.svg",png:"/assets/icons/icon-png.svg",svg:"/assets/icons/icon-svg.svg"},E=function(e){var n,r=e.extension;return n=r&&T[r]||"/assets/icons/icon-other.svg",(0,t.jsx)("img",{src:n})};E.propTypes={extension:c().string};var z=r(75573),A=r(86501),U=function(e){var n,r=e.caption,a=e.files,o=void 0===a?[]:a,l=e.onRemove,c=e.onRemoveAll,u=e.onUpload,m=(0,Z.Z)(e,["caption","files","onRemove","onRemoveAll","onUpload"]),T=(0,j.uI)(m),U=T.getRootProps,q=T.getInputProps,D=T.isDragActive,F=o.length>0,W=(0,i.useCallback)((n=(0,v.Z)(function(e){var n,r;return(0,g.__generator)(this,function(s){switch(s.label){case 0:n=new FormData,e.forEach(function(e,r){n.append("file".concat(r),e)}),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,fetch(z.J+"/upload",{method:"POST",body:n}).then(function(e){return e.json()})];case 2:return(r=s.sent())&&u(r),[3,4];case 3:return console.log(s.sent()),A.ZP.error("Something went wrong. Try again"),[3,4];case 4:return[2]}})}),function(e){return n.apply(this,arguments)}),[o]);return(0,t.jsxs)("div",{children:[(0,t.jsxs)(y.Z,(0,f.Z)((0,s.Z)({sx:(0,f.Z)((0,s.Z)({alignItems:"center",border:1,borderRadius:1,borderStyle:"dashed",borderColor:"divider",display:"flex",flexWrap:"wrap",justifyContent:"center",outline:"none",p:6},D&&{backgroundColor:"action.active",opacity:.5}),{"&:hover":{backgroundColor:"action.hover",cursor:"pointer",opacity:.5}})},U()),{children:[(0,t.jsx)("input",(0,s.Z)({},q())),(0,t.jsxs)(d.Z,{alignItems:"center",direction:"row",spacing:2,children:[(0,t.jsx)(C.Z,{sx:{height:64,width:64},children:(0,t.jsx)(x.Z,{children:(0,t.jsx)(b.Z,{})})}),(0,t.jsxs)(d.Z,{spacing:1,children:[(0,t.jsxs)(h.Z,{sx:{"& span":{textDecoration:"underline"}},variant:"h6",children:[(0,t.jsx)("span",{children:"Click to upload"})," or drag and drop"]}),r&&(0,t.jsx)(h.Z,{color:"text.secondary",variant:"body2",children:r})]})]})]})),F&&(0,t.jsxs)(y.Z,{sx:{mt:2},children:[(0,t.jsx)(_.Z,{children:o.map(function(e){var n=e.name.split(".").pop();return(0,t.jsxs)(k.ZP,{sx:{border:1,borderColor:"divider",borderRadius:1,"& + &":{mt:1}},children:[(0,t.jsx)(S.Z,{children:(0,t.jsx)(E,{extension:n})}),(0,t.jsx)(B.Z,{primary:e.name,primaryTypographyProps:{variant:"subtitle2"},secondary:P(e.size)}),(0,t.jsx)(R.Z,{title:"Remove",children:(0,t.jsx)(p.Z,{edge:"end",onClick:function(){return null==l?void 0:l(e)},children:(0,t.jsx)(x.Z,{children:(0,t.jsx)(w.Z,{})})})})]},e.path)})}),(0,t.jsxs)(d.Z,{alignItems:"center",direction:"row",justifyContent:"flex-end",spacing:2,sx:{mt:2},children:[(0,t.jsx)(I.Z,{color:"inherit",onClick:c,size:"small",type:"button",children:"Remove All"}),(0,t.jsx)(I.Z,{onClick:function(){W(o)},size:"small",type:"button",variant:"contained",children:"Upload"})]})]})]})};U.propTypes={caption:c().string,files:c().array,onRemove:c().func,onRemoveAll:c().func,onUpload:c().func,accept:c().objectOf(c().arrayOf(c().string.isRequired).isRequired),disabled:c().bool,getFilesFromEvent:c().func,maxFiles:c().number,maxSize:c().number,minSize:c().number,noClick:c().bool,noDrag:c().bool,noDragEventsBubbling:c().bool,noKeyboard:c().bool,onDrop:c().func,onDropAccepted:c().func,onDropRejected:c().func,onFileDialogCancel:c().func,preventDropOnDocument:c().bool};var q=function(e){var n=e.onClose,r=e.open,l=void 0!==r&&r,c=e.onUpload,v=(0,a.Z)((0,i.useState)([]),2),f=v[0],Z=v[1],g=Boolean(!(e.multiple||e.multiple)&&f.length);(0,i.useEffect)(function(){Z([])},[l]);var j=(0,i.useCallback)(function(e){g||Z(function(n){return(0,o.Z)(n).concat((0,o.Z)(e))})},[g]),b=(0,i.useCallback)(function(e){Z(function(n){return n.filter(function(n){return n.path!==e.path})})},[]),y=(0,i.useCallback)(function(){Z([])},[]);return(0,t.jsxs)(u.Z,{fullWidth:!0,maxWidth:"sm",open:l,onClose:n,children:[(0,t.jsxs)(d.Z,{alignItems:"center",direction:"row",justifyContent:"space-between",spacing:3,sx:{px:3,py:2},children:[(0,t.jsx)(h.Z,{variant:"h6",children:"Upload Files"}),(0,t.jsx)(p.Z,{color:"inherit",onClick:n,children:(0,t.jsx)(x.Z,{children:(0,t.jsx)(w.Z,{})})})]}),(0,t.jsx)(m.Z,{children:(0,t.jsx)(U,(0,s.Z)({files:f,onDrop:j,onRemove:b,onRemoveAll:y,onUpload:function(){n(),c(f)}},e))})]})};q.propTypes={onClose:c().func,open:c().bool}},61124:function(e,n,r){"use strict";r.d(n,{I:function(){return c}});var s=r(26042),a=r(69396),o=r(99534),t=r(85893),i=r(57422),l=(0,r(16829).Z)(i.Z)({"& .MuiFormHelperText-root.Mui-error":{position:"absolute",top:"100%"}}),c=function(e){var n=e.children,r=(0,o.Z)(e,["children"]);return(0,t.jsx)(l,(0,a.Z)((0,s.Z)({},r),{children:n}))}},91228:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return er}});var s,a=r(47568),o=r(26042),t=r(828),i=r(20414),l=r(85893),c=r(67294),u=r(87357),d=r(26447),h=r(15861),p=r(88409),x=r(40044),m=r(67720),v=r(69396),f=r(99534),Z=r(51647),g=r(92736),j=r(45697),b=r.n(j),w=r(66242),y=r(44267),C=r(81426),_=r(53219),k=r(87952),S=r(83321),B=r(18972),R=r(41796),I=r(61124),P=r(82580),T=r(74231),E=r(11181),z=[{icon:"/assets/flags/flag-uk.svg",label:"English",value:"en"},{icon:"/assets/flags/flag-ru.svg",label:"Russian",value:"ru"}],A=T.Ry({email:T.Z_().email("Must be a valid email").max(255).required("Email is required"),name:T.Z_().max(255).required("Name is required"),timezone:T.Rx(),language:T.Z_().oneOf(["en","ru"])}),U=function(e){var n=e.user,r=e.onSubmit,s=e.onUpload,p=(0,f.Z)(e,["user","onSubmit","onUpload"]),x=(0,t.Z)((0,c.useState)(!1),2),m=x[0],j=x[1],b=(0,t.Z)((0,c.useState)(null),2),T=b[0],U=b[1];(0,c.useEffect)(function(){var e;(e=(0,a.Z)(function(){var e,n;return(0,i.__generator)(this,function(r){switch(r.label){case 0:return[4,fetch("/timezones.json").then(function(e){return e.json()})];case 1:for(var s in e=r.sent(),n=[],e)n.push({value:+s,label:e[s]});return U(n),[2]}})}),function(){return e.apply(this,arguments)})()},[]);var q=(0,c.useCallback)(function(){j(!0)},[]),D=(0,c.useCallback)(function(){j(!1)},[]),F={name:(null==n?void 0:n.name)||"",email:(null==n?void 0:n.email)||"",avatar:(null==n?void 0:n.avatar)||"/assets/avatars/avatar-anika-visser.png",timezone:(null==n?void 0:n.timezone)||0,language:(null==n?void 0:n.language)||"en"},W=(0,P.TA)({initialValues:F,validationSchema:A,onSubmit:function(e,n){try{r(e)}catch(s){console.error(s),n.setStatus({success:!1}),n.setErrors({submit:s.message}),n.setSubmitting(!1)}}});return(0,l.jsxs)(d.Z,(0,v.Z)((0,o.Z)({spacing:4},p),{children:[(0,l.jsx)(w.Z,{children:(0,l.jsx)(y.Z,{children:(0,l.jsxs)(C.Z,{container:!0,spacing:3,children:[(0,l.jsx)(C.Z,{xs:12,md:4,children:(0,l.jsx)(h.Z,{variant:"h6",children:"Basic details"})}),(0,l.jsx)(C.Z,{xs:12,md:8,children:(0,l.jsxs)(d.Z,{spacing:3,children:[(0,l.jsxs)(d.Z,{alignItems:"center",direction:"row",spacing:2,children:[(0,l.jsx)(u.Z,{sx:{borderColor:"neutral.300",borderRadius:"50%",borderStyle:"dashed",borderWidth:1,p:"4px"},children:(0,l.jsxs)(u.Z,{sx:{borderRadius:"50%",height:"100%",width:"100%",position:"relative"},children:[(0,l.jsx)(u.Z,{sx:{alignItems:"center",backgroundColor:function(e){return(0,R.Fq)(e.palette.neutral[700],.5)},borderRadius:"50%",color:"common.white",cursor:"pointer",display:"flex",height:"100%",justifyContent:"center",left:0,opacity:0,position:"absolute",top:0,width:"100%",zIndex:1,"&:hover":{opacity:1}},onClick:q,children:(0,l.jsxs)(d.Z,{alignItems:"center",direction:"row",spacing:1,children:[(0,l.jsx)(_.Z,{color:"inherit",children:(0,l.jsx)(Z.Z,{})}),(0,l.jsx)(h.Z,{color:"inherit",variant:"subtitle2",sx:{fontWeight:700},children:"Select"})]})}),(0,l.jsx)(k.Z,{src:(null==n?void 0:n.avatar)||"/assets/avatars/avatar-anika-visser.png",sx:{height:100,width:100},children:(0,l.jsx)(_.Z,{children:(0,l.jsx)(g.Z,{})})})]})}),(0,l.jsx)(S.Z,{color:"inherit",size:"small",onClick:q,children:"Change"})]}),(0,l.jsx)("form",{noValidate:!0,children:(0,l.jsxs)(d.Z,{spacing:3,children:[(0,l.jsx)(I.I,{fullWidth:!0,label:"Full name",name:"name",type:"text",error:!!(W.touched.name&&W.errors.name),helperText:W.touched.name&&W.errors.name,onBlur:W.handleBlur,onChange:W.handleChange,value:W.values.name}),(0,l.jsx)(I.I,{fullWidth:!0,label:"Email Address",name:"email",type:"email",error:!!(W.touched.email&&W.errors.email),helperText:W.touched.email&&W.errors.email,onBlur:W.handleBlur,onChange:W.handleChange,value:W.values.email}),(0,l.jsx)(I.I,{name:"avatar",type:"text",value:W.values.avatar,sx:{display:"none"}}),(0,l.jsxs)(I.I,{fullWidth:!0,label:"Timezone",name:"timezone",onBlur:W.handleBlur,onChange:W.handleChange,select:!0,value:T?W.values.timezone:"",children:[!T&&(0,l.jsx)(B.Z,{value:""}),T&&T.map(function(e){return(0,l.jsx)(B.Z,{value:e.value,children:e.label},e.value)})]}),(0,l.jsx)(I.I,{fullWidth:!0,label:"Language",name:"language",onBlur:W.handleBlur,onChange:W.handleChange,select:!0,value:W.values.language,children:z.map(function(e){return(0,l.jsx)(B.Z,{value:e.value,children:(0,l.jsxs)(d.Z,{direction:"row",spacing:2,alignItems:"center",children:[(0,l.jsx)("img",{alt:e.label,src:e.icon}),(0,l.jsx)(u.Z,{children:e.label})]})},e.value)})}),(0,l.jsx)(d.Z,{direction:"row",justifyContent:"end",children:(0,l.jsx)(S.Z,{size:"large",type:"submit",variant:"contained",onClick:W.handleSubmit,children:"Save"})})]})})]})})]})})}),(0,l.jsx)(E.b,{onClose:D,open:m,onUpload:function(e){s(e),D()},multiple:!1})]}))};U.propTypes={user:b().object,onSubmit:b().func,updateAvatar:b().func},r(94723);var q=r(87109),D=r(93946),F=r(78445),W=function(e){var n=e.children,r=(0,f.Z)(e,["children"]);return(0,l.jsx)(S.Z,(0,v.Z)((0,o.Z)({variant:(null==r?void 0:r.variant)?r.variant:"contained"},r),{children:n}))},O=r(52186),M=r(58883);r(93041);var N=r(92951),G=r(86501),V=r(4056),H={old_password:"",password:"",confirm_password:""},J=T.Ry({old_password:T.Z_().max(255).required("Enter old password"),password:T.Z_().min(8).max(255).required("Password is required"),confirm_password:T.Z_().oneOf([T.iH("password")],"Passwords must match").max(255).required("Password is required")}),K=function(e){var n,r=e.user,s=(0,f.Z)(e,["user"]),p=(0,t.Z)((0,c.useState)(!1),2),x=p[0],m=p[1],Z=(0,t.Z)((0,c.useState)("enabled"===r.twofa.status),2),g=Z[0],j=Z[1],b=(0,t.Z)((0,c.useState)(""),2),_=b[0],k=b[1],S=s.onUpdate,B=(0,c.useCallback)(function(){g?(S((0,v.Z)((0,o.Z)({},r),{twofa:{status:"disabled"}})),j(!1)):j(!0)},[g]);(0,c.useEffect)(function(){var e,n=(e=(0,a.Z)(function(){var e,n,r;return(0,i.__generator)(this,function(s){switch(s.label){case 0:return[4,V.h.users.qr({size:300})];case 1:return n=(e=s.sent()).result,r=e.error,n?k(n):r&&G.ZP.error(r),[2]}})}),function(){return e.apply(this,arguments)});g&&n()},[g]);var R=(0,P.TA)({initialValues:H,validationSchema:J,onSubmit:(n=(0,a.Z)(function(e,n){return(0,i.__generator)(this,function(s){try{e.password!==r.password?G.ZP.error("You entered wrong password"):S(e)}catch(a){console.error(a),n.setStatus({success:!1}),n.setErrors({submit:a.message}),n.setSubmitting(!1)}return[2]})}),function(e,r){return n.apply(this,arguments)})});return(0,l.jsxs)(d.Z,{spacing:4,children:[(0,l.jsx)(w.Z,{children:(0,l.jsx)(y.Z,{children:(0,l.jsxs)(C.Z,{container:!0,spacing:3,children:[(0,l.jsx)(C.Z,{xs:12,md:4,children:(0,l.jsx)(h.Z,{variant:"h6",children:"Change password"})}),(0,l.jsx)(C.Z,{xs:12,sm:12,md:8,children:(0,l.jsxs)(d.Z,{spacing:3,children:[(0,l.jsx)(I.I,{error:!!(R.touched.old_password&&R.errors.old_password),fullWidth:!0,helperText:R.touched.old_password&&R.errors.old_password,label:"Password",name:"old_password",onBlur:R.handleBlur,onChange:R.handleChange,type:x?"text":"password",value:R.values.old_password,InputProps:{endAdornment:(0,l.jsx)(q.Z,{position:"end",children:(0,l.jsx)(D.Z,{"aria-label":"toggle password visibility",onClick:function(){m(!x)},color:"primary",children:x?(0,l.jsx)(O.Z,{}):(0,l.jsx)(M.Z,{})})})}}),(0,l.jsx)(I.I,{error:!!(R.touched.password&&R.errors.password),fullWidth:!0,helperText:R.touched.password&&R.errors.password,label:"New password",name:"password",onBlur:R.handleBlur,onChange:R.handleChange,type:"password",value:R.values.password}),(0,l.jsx)(I.I,{error:!!(R.touched.confirm_password&&R.errors.confirm_password),fullWidth:!0,helperText:R.touched.confirm_password&&R.errors.confirm_password,label:"Confirm password",name:"confirm_password",onBlur:R.handleBlur,onChange:R.handleChange,type:"password",value:R.values.confirm_password}),(0,l.jsx)(d.Z,{justifyContent:"end",direction:"row",children:(0,l.jsx)(W,{onClick:R.handleSubmit,children:"Save"})})]})})]})})}),(0,l.jsxs)(w.Z,{children:[(0,l.jsx)(F.Z,{title:"Two Factor Authentication"}),(0,l.jsx)(y.Z,{sx:{pt:0},children:(0,l.jsxs)(C.Z,{container:!0,spacing:4,children:[(0,l.jsx)(C.Z,{xs:12,sm:6,children:(0,l.jsx)(w.Z,{sx:{height:"100%"},variant:"outlined",children:(0,l.jsxs)(y.Z,{children:[(0,l.jsx)(u.Z,{sx:{display:"block",position:"relative"},children:(0,l.jsx)(u.Z,{sx:{"&::before":{backgroundColor:g?"success.main":"error.main",borderRadius:"50%",content:'""',display:"block",height:8,left:4,position:"absolute",top:7,width:8,zIndex:1}},children:(0,l.jsx)(h.Z,{color:g?"success.main":"error",sx:{pl:3},variant:"body2",children:g?"On":"Off"})})}),(0,l.jsx)(h.Z,{sx:{mt:1},variant:"subtitle2",children:"Google Authentication"}),(0,l.jsx)(h.Z,{color:"text.secondary",sx:{mt:1},variant:"body2",children:"Use an authenticator app to scan generated QR code."}),(0,l.jsx)(u.Z,{sx:{mt:4},children:(0,l.jsx)(W,{variant:"outlined",onClick:B,children:g?"Disable":"Set Up"})})]})})}),g&&(0,l.jsx)(C.Z,{sm:6,xs:12,children:(0,l.jsx)(w.Z,{sx:{height:"100%"},variant:"outlined",children:(0,l.jsxs)(y.Z,{children:[(0,l.jsx)(h.Z,{variant:"subtitle2",children:"Scan code or type below code in your app"}),!!_.length&&(0,l.jsx)("img",{src:_,alt:"",style:{width:"100%"}}),(0,l.jsx)(h.Z,{variant:"body2",children:r.twofa.key})]})})})]})})]})]})},X=r(75573),Y=r(74024),L=r(83720),Q=[{label:"General",value:"general"},{label:"Security",value:"security"}],$=function(e,n){var r=(0,o.Z)({},e,n);for(var s in r)""===r[s]&&delete r[s];return r},ee=(s=(0,a.Z)(function(e,n,r){var s;return(0,i.__generator)(this,function(a){switch(a.label){case 0:return s=$(e,n),[4,V.h.users.update(s)];case 1:return a.sent().error?G.ZP.error("Something went wrong"):(r(Y.Nw.fillMe(s)),G.ZP.success("Changes saved")),[2]}})}),function(e,n,r){return s.apply(this,arguments)}),en=function(){var e=(0,t.Z)((0,c.useState)("general"),2),n=e[0],r=e[1],s=(0,N.P)().user,a=(0,L.I0)(),i=(0,c.useCallback)(function(e,n){r(n)},[]),v=(0,c.useCallback)(function(e){ee(s,e,a)},[s,a]),f=(0,c.useCallback)(function(e){ee(s,e,a)},[s,a]),Z=(0,c.useCallback)(function(e){ee(s,{avatar:X.J+e[0].path},a)},[s,a]);return s&&(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(u.Z,{children:[(0,l.jsxs)(d.Z,{spacing:3,sx:{mb:3},children:[(0,l.jsx)(h.Z,{variant:"h4",children:"Account"}),(0,l.jsxs)("div",{children:[(0,l.jsx)(p.Z,{indicatorColor:"primary",onChange:i,scrollButtons:"auto",textColor:"primary",value:n,variant:"scrollable",children:Q.map(function(e){return(0,l.jsx)(x.Z,{label:e.label,value:e.value},e.value)})}),(0,l.jsx)(m.Z,{})]})]}),"general"===n&&(0,l.jsx)(U,(0,o.Z)({},{user:s,onSubmit:v,onUpload:Z})),"security"===n&&(0,l.jsx)(K,{user:s,onUpdate:f})]})})};en.defaultProps={title:"Account"};var er=en}},function(e){e.O(0,[551,583,889,364,774,888,179],function(){return e(e.s=84865)}),_N_E=e.O()}]);