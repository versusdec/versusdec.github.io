(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[327],{4625:function(e,n,t){"use strict";var i=t(82066),r=t(85893);n.Z=(0,i.Z)((0,r.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12zm8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8z"}),"Block")},52584:function(e,n,t){"use strict";var i=t(82066),r=t(85893);n.Z=(0,i.Z)((0,r.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm4.59-12.42L10 14.17l-2.59-2.58L6 13l4 4 8-8z"}),"CheckCircleOutlined")},95537:function(e,n,t){"use strict";var i=t(82066),r=t(85893);n.Z=(0,i.Z)((0,r.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},60666:function(e,n,t){"use strict";var i=t(82066),r=t(85893);n.Z=(0,i.Z)((0,r.jsx)("path",{d:"m14.06 9.02.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"}),"EditOutlined")},31425:function(e,n,t){"use strict";t.d(n,{Z:function(){return g}});var i=t(63366),r=t(87462),a=t(67294),o=t(86010),s=t(94780),l=t(90948),c=t(71657),u=t(1588),d=t(34867);function h(e){return(0,d.Z)("MuiDialogActions",e)}(0,u.Z)("MuiDialogActions",["root","spacing"]);var p=t(85893);let f=["className","disableSpacing"],Z=e=>{let{classes:n,disableSpacing:t}=e;return(0,s.Z)({root:["root",!t&&"spacing"]},h,n)},j=(0,l.ZP)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,n)=>{let{ownerState:t}=e;return[n.root,!t.disableSpacing&&n.spacing]}})(({ownerState:e})=>(0,r.Z)({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!e.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})),x=a.forwardRef(function(e,n){let t=(0,c.Z)({props:e,name:"MuiDialogActions"}),{className:a,disableSpacing:s=!1}=t,l=(0,i.Z)(t,f),u=(0,r.Z)({},t,{disableSpacing:s}),d=Z(u);return(0,p.jsx)(j,(0,r.Z)({className:(0,o.Z)(d.root,a),ownerState:u,ref:n},l))});var g=x},37645:function(e,n,t){"use strict";var i=t(87462),r=t(63366),a=t(67294),o=t(86010),s=t(94780),l=t(15861),c=t(90948),u=t(71657),d=t(4472),h=t(34182),p=t(85893);let f=["className","id"],Z=e=>{let{classes:n}=e;return(0,s.Z)({root:["root"]},d.a,n)},j=(0,c.ZP)(l.Z,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,n)=>n.root})({padding:"16px 24px",flex:"0 0 auto"}),x=a.forwardRef(function(e,n){let t=(0,u.Z)({props:e,name:"MuiDialogTitle"}),{className:s,id:l}=t,c=(0,r.Z)(t,f),d=Z(t),{titleId:x=l}=a.useContext(h.Z);return(0,p.jsx)(j,(0,i.Z)({component:"h2",className:(0,o.Z)(d.root,s),ownerState:t,ref:n,variant:"h6",id:x},c))});n.Z=x},15039:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/projects",function(){return t(95035)}])},62077:function(e,n,t){"use strict";t.d(n,{a:function(){return l}});var i=t(26042),r=t(99534),a=t(85893),o=t(87357),s=t(98456),l=function(e){var n=e.backdrop,t=e.sx;(0,r.Z)(e,["backdrop","sx"]);var l=(0,a.jsx)(o.Z,{sx:(0,i.Z)({position:"absolute",bottom:0,top:0,left:0,right:0,bgcolor:n?"rgb(0 0 1 / 30%)":"transparent",zIndex:100,display:"flex",justifyContent:"center",alignItems:"center"},t),children:(0,a.jsx)(s.Z,{disableShrink:!0,color:"primary"})});return(0,a.jsx)(a.Fragment,{children:l})}},3174:function(e,n,t){"use strict";t.d(n,{t:function(){return o}});var i=t(99534),r=t(85893),a=t(8896),o=function(e){var n=e.limit,t=e.total,o=e.page,s=e.onPageChange,l=e.onLimitChange;return(0,i.Z)(e,["limit","total","page","onPageChange","onLimitChange"]),(0,r.jsx)(a.Z,{component:"div",count:t,onPageChange:s,onRowsPerPageChange:l,page:o-1,rowsPerPage:n,rowsPerPageOptions:[10,25,50]})}},83594:function(e,n,t){"use strict";t.d(n,{h:function(){return s}});var i=t(26042),r=t(69396),a=t(828);t(11163),t(44795);var o=t(67294),s=function(){var e=(0,a.Z)((0,o.useState)({page:1,limit:10,offset:0}),2),n=e[0],t=e[1],s=(0,o.useCallback)(function(e,n){t(function(e){return(0,r.Z)((0,i.Z)({},e),{page:n+1,offset:n*e.limit})})},[]),l=(0,o.useCallback)(function(e){t(function(n){return(0,r.Z)((0,i.Z)({},n),{page:1,limit:parseInt(e.target.value,10),offset:0})})},[]);return(0,r.Z)((0,i.Z)({},n),{handlePageChange:s,handleLimitChange:l})}},95035:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return ec}});var i,r=t(47568),a=t(26042),o=t(828),s=t(70655),l=t(85893),c=t(67294),u=t(10216),d=t(26447),h=t(15861),p=t(83321),f=t(53219),Z=t(66242),j=t(69396),x=t(99534),g=t(41664),v=t.n(g),m=t(45697),C=t.n(m),b=t(52584),w=t(4625),k=t(60666),P=t(95537),S=t(87357),L=t(7906),_=t(295),y=t(68509),A=t(98102),R=t(53184),z=t(23795),M=t(34386),I=t(93946),N=t(64666),E=t(37645),F=t(6514),D=t(31425),T=t(55136),q=t(3174),O=t(62077),W=function(e){var n,t,i,r,s=e.projects,u=e.total,d=e.onPageChange,Z=e.handleLimitChange,g=e.page,m=e.limit,C=e.loading,W=e.handleStatus,B=e.grants,H=e.isAdmin,U=(0,x.Z)(e,["projects","total","onPageChange","handleLimitChange","page","limit","loading","handleStatus","grants","isAdmin"]),V=(0,o.Z)((0,c.useState)({open:!1,project:null}),2),X=V[0],G=V[1],J=H||B.includes("projects.write"),K=(0,c.useCallback)(function(e){G({open:!0,project:e})},[]),Q=(0,c.useCallback)(function(){G({open:!1,project:null})},[]);return(0,l.jsxs)(S.Z,(0,j.Z)((0,a.Z)({sx:{position:"relative"}},U),{children:[(0,l.jsx)(T.L,{children:(0,l.jsxs)(L.Z,{sx:{minWidth:700},children:[C&&!s.length&&(0,l.jsx)(_.Z,{children:(0,l.jsx)(y.Z,{children:(0,l.jsx)(A.Z,{children:(0,l.jsx)(S.Z,{sx:{position:"relative",width:"100%",height:"200px"},children:(0,l.jsx)(O.a,{})})})})}),!C&&!s.length&&(0,l.jsx)(_.Z,{children:(0,l.jsx)(y.Z,{children:(0,l.jsx)(A.Z,{align:"center",children:(0,l.jsx)(h.Z,{variant:"subtitle2",children:"Nothing found"})})})}),!!s.length&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(R.Z,{children:(0,l.jsxs)(y.Z,{children:[(0,l.jsx)(A.Z,{children:"ID"}),(0,l.jsx)(A.Z,{children:"Name"}),(0,l.jsx)(A.Z,{children:"Status"}),J&&(0,l.jsx)(A.Z,{align:"right",children:"Actions"})]})}),(0,l.jsx)(_.Z,{children:s.map(function(e){return(0,l.jsxs)(y.Z,{hover:!0,children:[(0,l.jsx)(A.Z,{children:e.id}),(0,l.jsx)(A.Z,{children:J?(0,l.jsx)(z.Z,{color:"inherit",variant:"subtitle2",component:v(),href:"/".concat(e.id),children:e.name}):e.name}),(0,l.jsx)(A.Z,{children:(0,l.jsx)(h.Z,{sx:{textTransform:"capitalize",color:"active"===e.status?"success.main":"error.main"},children:e.status})}),J&&(0,l.jsxs)(A.Z,{align:"right",children:[(0,l.jsx)(M.Z,{title:"active"===e.status?"Archive":"Unzip",children:(0,l.jsx)(I.Z,{onClick:function(){K(e)},children:(0,l.jsx)(f.Z,{color:"archived"===e.status?"success":"error",children:"archived"===e.status?(0,l.jsx)(b.Z,{}):(0,l.jsx)(w.Z,{})})})}),(0,l.jsx)(M.Z,{title:"Edit",children:(0,l.jsx)(I.Z,{component:v(),href:"/".concat(e.id),children:(0,l.jsx)(f.Z,{color:"primary",children:(0,l.jsx)(k.Z,{})})})})]})]},e.id)})})]})]})}),(0,l.jsx)(q.t,{limit:m,total:u,page:g,onPageChange:d,onLimitChange:Z}),(0,l.jsxs)(N.Z,{open:X.open,onClose:Q,scroll:"paper",maxWidth:"sm",fullWidth:!0,children:[(0,l.jsxs)(E.Z,{sx:{pr:10},children:[(0,l.jsx)(I.Z,{"aria-label":"close",onClick:Q,sx:{position:"absolute",right:8,top:8,color:function(e){return e.palette.primary.main}},children:(0,l.jsx)(P.Z,{})}),X.project&&((null===(n=X.project)||void 0===n?void 0:n.status)==="active"?"Archive project #".concat(null===(t=X.project)||void 0===t?void 0:t.id,"?"):"Unzip project #".concat(null===(i=X.project)||void 0===i?void 0:i.id,"?"))]}),(0,l.jsxs)(F.Z,{dividers:!0,children:[X.project&&"Project "," ",X.project&&(null===(r=X.project)||void 0===r?void 0:r.name)]}),(0,l.jsxs)(D.Z,{children:[(0,l.jsx)(p.Z,{type:"button",variant:"outlined",color:"error",onClick:Q,children:"Cancel"}),(0,l.jsx)(p.Z,{type:"button",variant:"contained",onClick:function(){var e,n;W(null===(e=X.project)||void 0===e?void 0:e.id,null===(n=X.project)||void 0===n?void 0:n.status,function(){Q()})},children:"Confirm"})]})]})]}))};W.propTypes={projects:C().array.isRequired,total:C().number.isRequired,onPageChange:C().func.isRequired,handleLimitChange:C().func,page:C().number.isRequired,limit:C().number.isRequired};var B=t(93041),H=t(92951),U=t(83594),V=t(95226),X=t(88409),G=t(40044),J=t(67720),K=t(57709),Q=t(87109),Y=[{label:"Active",value:"active"},{label:"Archived",value:"archived"}],$=function(e){var n=e.onFiltersChange,t=e.initialFilters,i=(0,c.useRef)(null),r=(0,o.Z)((0,c.useState)("active"),2),s=r[0],u=r[1],h=(0,o.Z)((0,c.useState)(t),2),p=h[0],Z=h[1],x=(0,c.useCallback)(function(){null==n||n(p)},[p,n]);(0,c.useEffect)(function(){x()},[p,x]);var g=(0,c.useCallback)(function(e,n){u(n),Z(function(e){return(0,j.Z)((0,a.Z)({},e),{status:n})})},[]),v=(0,c.useCallback)(function(e){e.preventDefault(),Z(function(e){var n;return(0,j.Z)((0,a.Z)({},e),{q:null===(n=i.current)||void 0===n?void 0:n.value})})},[]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(X.Z,{indicatorColor:"primary",onChange:g,scrollButtons:"auto",sx:{px:3},textColor:"primary",value:s,variant:"scrollable",children:Y.map(function(e){return(0,l.jsx)(G.Z,{label:e.label,value:e.value},e.value)})}),(0,l.jsx)(J.Z,{}),(0,l.jsx)(d.Z,{alignItems:"center",direction:"row",flexWrap:"wrap",spacing:3,sx:{p:3},children:(0,l.jsx)(S.Z,{component:"form",onSubmit:v,sx:{flexGrow:1},children:(0,l.jsx)(K.Z,{defaultValue:"",fullWidth:!0,inputProps:{ref:i},placeholder:"Search projects",startAdornment:(0,l.jsx)(Q.Z,{position:"start",children:(0,l.jsx)(f.Z,{children:(0,l.jsx)(V.Z,{})})})})})})]})};$.propTypes={onFiltersChange:C().func};var ee=t(83720),en=t(83240),et=function(e){var n=(0,ee.I0)(),t=(0,ee.v9)(function(e){return e.projects.list}),i=t.data,r=t.loading,a=t.error,o=(0,c.useCallback)(function(e){e.q?n((0,en.Ob)(e)):n((0,en.mB)(e))},[n]);return(0,c.useEffect)(function(){o(e)},[e,o]),{projects:i,loading:r,error:a}},ei=t(4056),er=t(86501),ea=t(58241),eo=t(39332),es=function(e){var n=e.children,t=(0,eo.useRouter)(),i=(0,o.Z)((0,c.useState)(!1),2),r=i[0],a=i[1],s=(0,H.P)().data,u=(0,ea.a)(null==s?void 0:s.role_id),d=(0,c.useCallback)(function(){s&&(u.length||0===s.role_id)&&(0===s.role_id||u.includes("projects.read")?a(!0):t.replace(B.H.index))},[s,u,t]);return((0,c.useEffect)(function(){d()},[s,u,d]),r)?(0,l.jsx)(l.Fragment,{children:n}):null};es.propTypes={children:C().node};var el=(i=function(){var e,n=(0,ee.I0)(),t=(0,H.P)().data,i=(0,U.h)(),j=i.page,x=i.limit,g=i.offset,m=i.handlePageChange,C=i.handleLimitChange,b=(0,o.Z)((0,c.useState)({status:"active"}),2),w=b[0],k=b[1],P=(0,ea.a)(null==t?void 0:t.role_id),S=t&&0===t.role_id,L=(0,c.useCallback)(function(e){k(e)},[]),_=(0,c.useMemo)(function(){return(0,a.Z)({limit:x,offset:g},w)},[x,g,w]),y=et(_),A=y.projects,R=y.loading;y.error;var z=A&&A||{items:[],limit:x,total:0},M=z.items,I=z.total,N=(0,c.useCallback)((e=(0,r.Z)(function(e,t,i){return(0,s.__generator)(this,function(r){switch(r.label){case 0:return[4,ei.h.projects.update({id:+e,status:"archived"===t?"active":"archived"})];case 1:return r.sent()?(i(),n((0,en.mB)(_))):er.ZP.error("Something went wrong"),[2]}})}),function(n,t,i){return e.apply(this,arguments)}),[n,_]);return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(d.Z,{spacing:4,children:[(0,l.jsxs)(d.Z,{direction:"row",justifyContent:"space-between",spacing:4,children:[(0,l.jsx)(d.Z,{spacing:1,children:(0,l.jsx)(h.Z,{variant:"h4",children:"Projects"})}),(0,l.jsx)(d.Z,{alignItems:"center",direction:"row",spacing:3,children:t&&(0===t.role_id||P.includes("projects.write"))&&(0,l.jsx)(p.Z,{component:v(),href:B.H.projects.add,startIcon:(0,l.jsx)(f.Z,{children:(0,l.jsx)(u.Z,{})}),variant:"contained",children:"Add"})})]}),(0,l.jsxs)(Z.Z,{children:[(0,l.jsx)($,{onFiltersChange:L,initialFilters:w}),(0,l.jsx)(W,{projects:M,total:I,onPageChange:m,handleLimitChange:C,limit:x,page:j,loading:R,handleStatus:N,grants:P,isAdmin:S})]})]})})},function(e){return(0,l.jsx)(es,{children:(0,l.jsx)(i,(0,a.Z)({},e))})});el.defaultProps={title:"Projects"};var ec=el},10216:function(e,n,t){"use strict";var i=t(87462);t(67294);var r=t(85893);n.Z=function(e){return(0,r.jsx)("svg",(0,i.Z)({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e,{children:(0,r.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v14m-7-7h14"})}))}}},function(e){e.O(0,[105,290,896,774,567,179],function(){return e(e.s=15039)}),_N_E=e.O()}]);