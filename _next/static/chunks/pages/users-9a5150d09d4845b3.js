(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[892],{64964:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/users",function(){return t(31924)}])},62077:function(e,n,t){"use strict";t.d(n,{a:function(){return c}});var i=t(26042),r=t(99534),a=t(85893),l=t(87357),s=t(98456),c=function(e){var n=e.backdrop,t=e.sx;(0,r.Z)(e,["backdrop","sx"]);var c=(0,a.jsx)(l.Z,{sx:(0,i.Z)({position:"absolute",bottom:0,top:0,left:0,right:0,bgcolor:n?"rgb(0 0 1 / 30%)":"transparent",zIndex:100,display:"flex",justifyContent:"center",alignItems:"center"},t),children:(0,a.jsx)(s.Z,{disableShrink:!0,color:"primary"})});return(0,a.jsx)(a.Fragment,{children:c})}},31924:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return en}});var i=t(26042),r=t(828),a=t(85893),l=t(67294),s=t(10216),c=t(26447),o=t(15861),u=t(83321),d=t(53219),h=t(66242),x=t(69396),g=t(99534),f=t(36305),Z=t(41664),p=t.n(Z);t(92077);var j=t(45697),m=t.n(j),v=t(52584),C=t(4625),b=t(60666),k=t(87357),P=t(85071),w=t(7906),y=t(295),I=t(53816),_=t(98102),E=t(53184),L=t(87952),S=t(23795),A=t(34386),F=t(93946),N=t(55136),O=t(93041),q=t(8896),R=function(e){var n=e.limit,t=e.total,i=e.page,r=e.onPageChange,l=e.onLimitChange;return(0,g.Z)(e,["limit","total","page","onPageChange","onLimitChange"]),(0,a.jsx)(q.Z,{component:"div",count:t,onPageChange:r,onRowsPerPageChange:l,page:i-1,rowsPerPage:n,rowsPerPageOptions:[1,2,3]})},z=t(62077),T=function(e){var n=(0,l.useMemo)(function(){return e.map(function(n){return e.id})},[e]),t=(0,r.Z)((0,l.useState)([]),2),i=t[0],a=t[1];(0,l.useEffect)(function(){a([])},[n]);var s=(0,l.useCallback)(function(e){a(function(n){return(0,f.Z)(n).concat([e])})},[]),c=(0,l.useCallback)(function(e){a(function(n){return n.filter(function(n){return n!==e})})},[]),o=(0,l.useCallback)(function(){a((0,f.Z)(n))},[n]);return{deselectAll:(0,l.useCallback)(function(){a([])},[]),deselectOne:c,selectAll:o,selectOne:s,selected:i}},D=function(e){var n=e.users,t=e.total,r=e.onPageChange,s=e.handleLimitChange,h=e.page,f=e.limit,Z=e.loading,j=(0,g.Z)(e,["users","total","onPageChange","handleLimitChange","page","limit","loading"]),m=T(n),q=m.deselectAll,D=m.selectAll,H=m.deselectOne,U=m.selectOne,W=m.selected,B=(0,l.useCallback)(function(e){e.target.checked?D():q()},[D,q]),G=W.length===n.length,M=W.length>0&&W.length<n.length,X=W.length>0;return(0,a.jsxs)(k.Z,(0,x.Z)((0,i.Z)({sx:{position:"relative"}},j),{children:[X&&(0,a.jsxs)(c.Z,{direction:"row",spacing:2,sx:{alignItems:"center",backgroundColor:function(e){return"dark"===e.palette.mode?"neutral.800":"neutral.50"},display:X?"flex":"none",position:"absolute",top:0,left:0,width:"100%",px:2,py:.5,zIndex:10},children:[(0,a.jsx)(P.Z,{checked:G,indeterminate:M,onChange:B}),(0,a.jsx)(u.Z,{color:"inherit",size:"small",children:"Delete"}),(0,a.jsx)(u.Z,{color:"inherit",size:"small",children:"Edit"})]}),(0,a.jsx)(N.L,{children:(0,a.jsxs)(w.Z,{sx:{minWidth:700},children:[Z&&!n.length&&(0,a.jsx)(y.Z,{children:(0,a.jsx)(I.Z,{children:(0,a.jsx)(k.Z,{sx:{position:"relative",width:"100%",height:"200px"},children:(0,a.jsx)(z.a,{})})})}),!Z&&!n.length&&(0,a.jsx)(y.Z,{children:(0,a.jsx)(I.Z,{children:(0,a.jsx)(_.Z,{align:"center",children:(0,a.jsx)(o.Z,{variant:"subtitle2",children:"Nothing found"})})})}),!!n.length&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(E.Z,{children:(0,a.jsxs)(I.Z,{children:[(0,a.jsx)(_.Z,{padding:"checkbox",children:(0,a.jsx)(P.Z,{checked:G,indeterminate:M,onChange:B})}),(0,a.jsx)(_.Z,{children:"ID"}),(0,a.jsx)(_.Z,{children:"Name"}),(0,a.jsx)(_.Z,{children:"Status"}),(0,a.jsx)(_.Z,{align:"right",children:"Actions"})]})}),(0,a.jsx)(y.Z,{children:n.map(function(e){var n=W.includes(e.id);return(0,a.jsxs)(I.Z,{hover:!0,selected:n,children:[(0,a.jsx)(_.Z,{padding:"checkbox",children:(0,a.jsx)(P.Z,{checked:n,onChange:function(n){n.target.checked?U(e.id):H(e.id)},value:n})}),(0,a.jsx)(_.Z,{children:e.id}),(0,a.jsx)(_.Z,{children:(0,a.jsxs)(c.Z,{alignItems:"center",direction:"row",spacing:1,children:[(0,a.jsx)(L.Z,{src:e.avatar,sx:{height:42,width:42},children:e.name}),(0,a.jsxs)("div",{children:[(0,a.jsx)(S.Z,{color:"inherit",component:p(),href:"".concat(O.H.users.index,"/").concat(e.id),variant:"subtitle2",children:e.name}),(0,a.jsx)(o.Z,{color:"text.secondary",variant:"body2",children:e.email})]})]})}),(0,a.jsx)(_.Z,{children:(0,a.jsx)(o.Z,{sx:{textTransform:"capitalize",color:"active"===e.status?"success.main":"error.main"},children:e.status})}),(0,a.jsxs)(_.Z,{align:"right",children:[(0,a.jsx)(A.Z,{title:"active"===e.status?"Block":"Unblock",children:(0,a.jsx)(F.Z,{onClick:function(){},children:(0,a.jsx)(d.Z,{color:"blocked"===e.status?"success":"error",children:"blocked"===e.status?(0,a.jsx)(v.Z,{}):(0,a.jsx)(C.Z,{})})})}),(0,a.jsx)(A.Z,{title:"Edit",children:(0,a.jsx)(F.Z,{component:p(),href:"".concat(O.H.users.index,"/").concat(e.id),children:(0,a.jsx)(d.Z,{color:"primary",children:(0,a.jsx)(b.Z,{})})})})]})]},e.id)})})]})]})}),(0,a.jsx)(R,{limit:f,total:t,page:h,onPageChange:r,onLimitChange:s})]}))};D.propTypes={users:m().array.isRequired,total:m().number.isRequired,onPageChange:m().func.isRequired,handleLimitChange:m().func,page:m().number.isRequired,limit:m().number.isRequired};var H=t(92951),U=t(83720),W=t(74024),B=function(e){var n=(0,U.I0)(),t=(0,U.v9)(function(e){return e.users.list}),i=t.data,r=t.loading,a=t.error,s=(0,l.useCallback)(function(){e.q?n((0,W.N8)(e)):n((0,W.AG)(e))},[e]);return(0,l.useEffect)(function(){s()},[n,e]),{users:i,loading:r,error:a}};t(11163),t(44795);var G=function(){var e=(0,r.Z)((0,l.useState)({page:1,limit:1,offset:0}),2),n=e[0],t=e[1],a=(0,l.useCallback)(function(e,n){t(function(e){return(0,x.Z)((0,i.Z)({},e),{page:n+1,offset:n*e.limit})})},[]),s=(0,l.useCallback)(function(e){t(function(n){return(0,x.Z)((0,i.Z)({},n),{limit:parseInt(e.target.value,10),offset:(n.page-1)*parseInt(e.target.value,10)})})},[]);return(0,x.Z)((0,i.Z)({},n),{handlePageChange:a,handleLimitChange:s})},M=t(95226),X=t(88409),V=t(40044),J=t(67720),K=t(57709),Q=t(87109),Y=[{label:"All",value:"all"},{label:"Supervisors",value:"supervisor"},{label:"Operators",value:"operator"}],$=function(e){var n=e.onFiltersChange,t=(0,l.useRef)(null),s=(0,r.Z)((0,l.useState)("all"),2),o=s[0],u=s[1],h=(0,r.Z)((0,l.useState)(),2),g=h[0],f=h[1],Z=(0,l.useCallback)(function(){null==n||n(g)},[g,n]);(0,l.useEffect)(function(){Z()},[g,Z]);var p=(0,l.useCallback)(function(e,n){u(n),f(function(e){var t=(0,x.Z)((0,i.Z)({},e),{role:n});return"all"===n&&delete t.role,t})},[]),j=(0,l.useCallback)(function(e){e.preventDefault(),f(function(e){var n;return(0,x.Z)((0,i.Z)({},e),{q:null===(n=t.current)||void 0===n?void 0:n.value})})},[]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(X.Z,{indicatorColor:"primary",onChange:p,scrollButtons:"auto",sx:{px:3},textColor:"primary",value:o,variant:"scrollable",children:Y.map(function(e){return(0,a.jsx)(V.Z,{label:e.label,value:e.value},e.value)})}),(0,a.jsx)(J.Z,{}),(0,a.jsx)(c.Z,{alignItems:"center",direction:"row",flexWrap:"wrap",spacing:3,sx:{p:3},children:(0,a.jsx)(k.Z,{component:"form",onSubmit:j,sx:{flexGrow:1},children:(0,a.jsx)(K.Z,{defaultValue:"",fullWidth:!0,inputProps:{ref:t},placeholder:"Search users",startAdornment:(0,a.jsx)(Q.Z,{position:"start",children:(0,a.jsx)(d.Z,{children:(0,a.jsx)(M.Z,{})})})})})})]})};$.propTypes={onFiltersChange:m().func};var ee=function(){var e=(0,H.P)().user,n=G(),t=n.page,x=n.limit,g=n.offset,f=n.handlePageChange,Z=n.handleLimitChange,j=(0,r.Z)((0,l.useState)({}),2),m=j[0],v=j[1],C=(0,l.useCallback)(function(e){f(null,0),v(e)},[m]),b=B((0,l.useMemo)(function(){return(0,i.Z)({limit:x,offset:g},m)},[x,g,m])),k=b.users,P=b.loading;b.error;var w=k||{items:[],limit:x,total:0},y=w.items,I=w.total;return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(c.Z,{spacing:4,children:[(0,a.jsxs)(c.Z,{direction:"row",justifyContent:"space-between",spacing:4,children:[(0,a.jsx)(c.Z,{spacing:1,children:(0,a.jsx)(o.Z,{variant:"h4",children:"Users"})}),(0,a.jsx)(c.Z,{alignItems:"center",direction:"row",spacing:3,children:e&&("admin"===e.role||"client"===e.role)&&(0,a.jsx)(u.Z,{component:p(),href:O.H.users.edit,startIcon:(0,a.jsx)(d.Z,{children:(0,a.jsx)(s.Z,{})}),variant:"contained",children:"Add"})})]}),(0,a.jsxs)(h.Z,{children:[(0,a.jsx)($,{onFiltersChange:C,initialFilters:m}),(0,a.jsx)(D,{users:y,total:I,onPageChange:f,handleLimitChange:Z,limit:x,page:t,loading:P})]})]})})};ee.defaultProps={title:"Users"};var en=ee}},function(e){e.O(0,[583,13,774,888,179],function(){return e(e.s=64964)}),_N_E=e.O()}]);