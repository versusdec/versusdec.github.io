(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{99226:function(e,n,t){"use strict";var i=t(82066),r=t(85893);n.Z=(0,i.Z)((0,r.jsx)("path",{d:"m20.54 5.23-1.39-1.68C18.88 3.21 18.47 3 18 3H6c-.47 0-.88.21-1.16.55L3.46 5.23C3.17 5.57 3 6.02 3 6.5V19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6.5c0-.48-.17-.93-.46-1.27zM6.24 5h11.52l.81.97H5.44l.8-.97zM5 19V8h14v11H5zm8.45-9h-2.9v3H8l4 4 4-4h-2.55z"}),"ArchiveOutlined")},95537:function(e,n,t){"use strict";var i=t(82066),r=t(85893);n.Z=(0,i.Z)((0,r.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},60666:function(e,n,t){"use strict";var i=t(82066),r=t(85893);n.Z=(0,i.Z)((0,r.jsx)("path",{d:"m14.06 9.02.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"}),"EditOutlined")},75471:function(e,n,t){"use strict";var i=t(82066),r=t(85893);n.Z=(0,i.Z)((0,r.jsx)("path",{d:"m20.54 5.23-1.39-1.68C18.88 3.21 18.47 3 18 3H6c-.47 0-.88.21-1.16.55L3.46 5.23C3.17 5.57 3 6.02 3 6.5V19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6.5c0-.48-.17-.93-.46-1.27zM6.24 5h11.52l.83 1H5.42l.82-1zM5 19V8h14v11H5zm3-5h2.55v3h2.9v-3H16l-4-4z"}),"UnarchiveOutlined")},31425:function(e,n,t){"use strict";t.d(n,{Z:function(){return v}});var i=t(63366),r=t(87462),a=t(67294),s=t(86010),l=t(94780),o=t(90948),c=t(71657),u=t(1588),d=t(34867);function h(e){return(0,d.Z)("MuiDialogActions",e)}(0,u.Z)("MuiDialogActions",["root","spacing"]);var Z=t(85893);let f=["className","disableSpacing"],p=e=>{let{classes:n,disableSpacing:t}=e;return(0,l.Z)({root:["root",!t&&"spacing"]},h,n)},x=(0,o.ZP)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,n)=>{let{ownerState:t}=e;return[n.root,!t.disableSpacing&&n.spacing]}})(({ownerState:e})=>(0,r.Z)({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!e.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})),g=a.forwardRef(function(e,n){let t=(0,c.Z)({props:e,name:"MuiDialogActions"}),{className:a,disableSpacing:l=!1}=t,o=(0,i.Z)(t,f),u=(0,r.Z)({},t,{disableSpacing:l}),d=p(u);return(0,Z.jsx)(x,(0,r.Z)({className:(0,s.Z)(d.root,a),ownerState:u,ref:n},o))});var v=g},37645:function(e,n,t){"use strict";var i=t(87462),r=t(63366),a=t(67294),s=t(86010),l=t(94780),o=t(15861),c=t(90948),u=t(71657),d=t(4472),h=t(34182),Z=t(85893);let f=["className","id"],p=e=>{let{classes:n}=e;return(0,l.Z)({root:["root"]},d.a,n)},x=(0,c.ZP)(o.Z,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,n)=>n.root})({padding:"16px 24px",flex:"0 0 auto"}),g=a.forwardRef(function(e,n){let t=(0,u.Z)({props:e,name:"MuiDialogTitle"}),{className:l,id:o}=t,c=(0,r.Z)(t,f),d=p(t),{titleId:g=o}=a.useContext(h.Z);return(0,Z.jsx)(x,(0,i.Z)({component:"h2",className:(0,s.Z)(d.root,l),ownerState:t,ref:n,variant:"h6",id:g},c))});n.Z=g},45366:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[project]/queues",function(){return t(18740)}])},62077:function(e,n,t){"use strict";t.d(n,{a:function(){return o}});var i=t(26042),r=t(99534),a=t(85893),s=t(87357),l=t(98456),o=function(e){var n=e.backdrop,t=e.sx;(0,r.Z)(e,["backdrop","sx"]);var o=(0,a.jsx)(s.Z,{sx:(0,i.Z)({position:"absolute",bottom:0,top:0,left:0,right:0,bgcolor:n?"rgb(0 0 1 / 30%)":"transparent",zIndex:100,display:"flex",justifyContent:"center",alignItems:"center"},t),children:(0,a.jsx)(l.Z,{disableShrink:!0,color:"primary"})});return(0,a.jsx)(a.Fragment,{children:o})}},3174:function(e,n,t){"use strict";t.d(n,{t:function(){return s}});var i=t(99534),r=t(85893),a=t(8896),s=function(e){var n=e.limit,t=e.total,s=e.page,l=e.onPageChange,o=e.onLimitChange;return(0,i.Z)(e,["limit","total","page","onPageChange","onLimitChange"]),(0,r.jsx)(a.Z,{component:"div",count:t,onPageChange:l,onRowsPerPageChange:o,page:s-1,rowsPerPage:n,rowsPerPageOptions:[10,25,50]})}},83594:function(e,n,t){"use strict";t.d(n,{h:function(){return l}});var i=t(26042),r=t(69396),a=t(828);t(11163),t(44795);var s=t(67294),l=function(){var e=(0,a.Z)((0,s.useState)({page:1,limit:10,offset:0}),2),n=e[0],t=e[1],l=(0,s.useCallback)(function(e,n){t(function(e){return(0,r.Z)((0,i.Z)({},e),{page:n+1,offset:n*e.limit})})},[]),o=(0,s.useCallback)(function(e){t(function(n){return(0,r.Z)((0,i.Z)({},n),{page:1,limit:parseInt(e.target.value,10),offset:0})})},[]);return(0,r.Z)((0,i.Z)({},n),{handlePageChange:l,handleLimitChange:o})}},18740:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return ec}});var i,r=t(47568),a=t(26042),s=t(69396),l=t(828),o=t(70655),c=t(85893),u=t(67294),d=t(10216),h=t(26447),Z=t(15861),f=t(83321),p=t(53219),x=t(66242),g=t(45697),v=t.n(g),m=t(95226),j=t(88409),C=t(40044),b=t(67720),w=t(87357),k=t(57709),P=t(87109),_=[{label:"All",value:"all"},{label:"Active",value:"active"},{label:"Archived",value:"archived"}],y=function(e){var n=e.onFiltersChange,t=e.initialFilters,i=(0,u.useRef)(null),r=(0,l.Z)((0,u.useState)("all"),2),o=r[0],d=r[1],Z=(0,l.Z)((0,u.useState)(t),2),f=Z[0],x=Z[1],g=(0,u.useCallback)(function(){null==n||n(f)},[f,n]);(0,u.useEffect)(function(){g()},[f,g]);var v=(0,u.useCallback)(function(e,n){d(n),x(function(e){var t=(0,s.Z)((0,a.Z)({},e),{status:n});return"all"===n&&delete t.status,t})},[]),y=(0,u.useCallback)(function(e){e.preventDefault(),x(function(e){var n;return(0,s.Z)((0,a.Z)({},e),{q:null===(n=i.current)||void 0===n?void 0:n.value})})},[]);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(j.Z,{indicatorColor:"primary",onChange:v,scrollButtons:"auto",sx:{px:3},textColor:"primary",value:o,variant:"scrollable",children:_.map(function(e){return(0,c.jsx)(C.Z,{label:e.label,value:e.value},e.value)})}),(0,c.jsx)(b.Z,{}),(0,c.jsx)(h.Z,{alignItems:"center",direction:"row",flexWrap:"wrap",spacing:3,sx:{p:3},children:(0,c.jsx)(w.Z,{component:"form",onSubmit:y,sx:{flexGrow:1},children:(0,c.jsx)(k.Z,{defaultValue:"",fullWidth:!0,inputProps:{ref:i},placeholder:"Search",startAdornment:(0,c.jsx)(P.Z,{position:"start",children:(0,c.jsx)(p.Z,{children:(0,c.jsx)(m.Z,{})})})})})})]})};y.propTypes={onFiltersChange:v().func};var L=t(99534),S=t(41664),q=t.n(S),z=t(75471),R=t(99226),M=t(60666),A=t(95537),N=t(7906),H=t(295),I=t(68509),E=t(98102),F=t(53184),T=t(34386),D=t(93946),V=t(64666),O=t(37645),W=t(6514),U=t(31425),Q=t(55136),X=t(3174),B=t(62077),G=function(e){var n,t,i,r,o=e.items,d=e.total,h=e.onPageChange,x=e.handleLimitChange,g=e.page,v=e.limit,m=e.loading,j=e.handleStatus,C=e.project_id,b=(0,L.Z)(e,["items","total","onPageChange","handleLimitChange","page","limit","loading","handleStatus","project_id"]),k=(0,l.Z)((0,u.useState)({open:!1,item:null}),2),P=k[0],_=k[1],y=(0,u.useCallback)(function(e){_({open:!0,item:e})},[]),S=(0,u.useCallback)(function(){_({open:!1,item:null})},[]);return(0,c.jsxs)(w.Z,(0,s.Z)((0,a.Z)({sx:{position:"relative"}},b),{children:[(0,c.jsx)(Q.L,{children:(0,c.jsxs)(N.Z,{sx:{minWidth:700},children:[m&&!o.length&&(0,c.jsx)(H.Z,{children:(0,c.jsx)(I.Z,{children:(0,c.jsx)(E.Z,{children:(0,c.jsx)(w.Z,{sx:{position:"relative",width:"100%",height:"200px"},children:(0,c.jsx)(B.a,{})})})})}),!m&&!o.length&&(0,c.jsx)(H.Z,{children:(0,c.jsx)(I.Z,{children:(0,c.jsx)(E.Z,{align:"center",children:(0,c.jsx)(Z.Z,{variant:"subtitle2",children:"Nothing found"})})})}),!!o.length&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(F.Z,{children:(0,c.jsxs)(I.Z,{children:[(0,c.jsx)(E.Z,{children:"ID"}),(0,c.jsx)(E.Z,{children:"Name"}),(0,c.jsx)(E.Z,{children:"Users total"}),(0,c.jsx)(E.Z,{children:"Status"}),(0,c.jsx)(E.Z,{align:"right",children:"Actions"})]})}),(0,c.jsx)(H.Z,{children:o.map(function(e){return(0,c.jsxs)(I.Z,{hover:!0,children:[(0,c.jsx)(E.Z,{children:e.id}),(0,c.jsx)(E.Z,{children:(0,c.jsx)(Z.Z,{children:e.name})}),(0,c.jsx)(E.Z,{sx:{textTransform:"capitalize"}}),(0,c.jsx)(E.Z,{children:(0,c.jsx)(Z.Z,{sx:{textTransform:"capitalize",color:"active"===e.status?"success.main":"error.main"},children:e.status})}),(0,c.jsxs)(E.Z,{align:"right",children:[(0,c.jsx)(T.Z,{title:"active"===e.status?"Archive":"Unzip",children:(0,c.jsx)(D.Z,{onClick:function(){y(e)},children:(0,c.jsx)(p.Z,{color:"archived"===e.status?"success":"error",children:"archived"===e.status?(0,c.jsx)(z.Z,{}):(0,c.jsx)(R.Z,{})})})}),(0,c.jsx)(T.Z,{title:"Edit",children:(0,c.jsx)(D.Z,{component:q(),href:"/".concat(C,"/queues/").concat(e.id),children:(0,c.jsx)(p.Z,{color:"primary",children:(0,c.jsx)(M.Z,{})})})})]})]},e.id)})})]})]})}),(0,c.jsx)(X.t,{limit:v,total:d,page:g,onPageChange:h,onLimitChange:x}),(0,c.jsxs)(V.Z,{open:P.open,onClose:S,scroll:"paper",maxWidth:"sm",fullWidth:!0,children:[(0,c.jsxs)(O.Z,{sx:{pr:10},children:[(0,c.jsx)(D.Z,{"aria-label":"close",onClick:S,sx:{position:"absolute",right:8,top:8,color:function(e){return e.palette.primary.main}},children:(0,c.jsx)(A.Z,{})}),P.item&&((null===(n=P.item)||void 0===n?void 0:n.status)==="active"?"Archive queue #".concat(null===(t=P.item)||void 0===t?void 0:t.id,"?"):"Unzip queue #".concat(null===(i=P.item)||void 0===i?void 0:i.id,"?"))]}),(0,c.jsxs)(W.Z,{dividers:!0,children:[P.item&&"Queue "," ",(0,c.jsx)(Z.Z,{component:"span",variant:"subtitle1",children:P.item&&(null===(r=P.item)||void 0===r?void 0:r.name)})]}),(0,c.jsxs)(U.Z,{children:[(0,c.jsx)(f.Z,{type:"button",variant:"outlined",color:"error",onClick:S,children:"Cancel"}),(0,c.jsx)(f.Z,{type:"button",variant:"contained",onClick:function(){var e,n;j(null===(e=P.item)||void 0===e?void 0:e.id,null===(n=P.item)||void 0===n?void 0:n.status,function(){S()})},children:"Confirm"})]})]})]}))};G.propTypes={items:v().array.isRequired,total:v().number.isRequired,onPageChange:v().func.isRequired,handleLimitChange:v().func,page:v().number.isRequired,limit:v().number.isRequired};var J=t(93041),K=t(92951),Y=t(83720),$=t(98372),ee=function(e){var n=(0,Y.I0)(),t=(0,Y.v9)(function(e){return e.queues.list}),i=t.data,r=t.loading,a=t.error,s=(0,u.useCallback)(function(){e.q?n((0,$.sU)(e)):n((0,$.xL)(e))},[e,n]),l=(0,u.useCallback)(function(){s()},[s]);return(0,u.useEffect)(function(){s()},[e,s]),{data:i,loading:r,error:a,update:l}},en=t(83594),et=t(4056),ei=t(86501),er=t(11163),ea=t(39332),es=t(58241),el=function(e){var n=e.children,t=(0,ea.useRouter)(),i=(0,l.Z)((0,u.useState)(!1),2),r=i[0],a=i[1],s=(0,K.P)().data,o=(0,es.a)(null==s?void 0:s.role_id),d=(0,u.useCallback)(function(){s&&(o.length||0===s.role_id)&&(0===s.role_id||o.includes("projects.queues.read")?a(!0):t.replace(J.H.index))},[s,o,t]);return((0,u.useEffect)(function(){d()},[s,o,d]),r)?(0,c.jsx)(c.Fragment,{children:n}):null};el.propTypes={children:v().node};var eo=(i=function(){var e,n=(0,Y.I0)(),t=(0,er.useRouter)();(0,K.P)();var i=(0,en.h)(),g=i.page,v=i.limit,m=i.offset,j=i.handlePageChange,C=i.handleLimitChange,b=(0,l.Z)((0,u.useState)({}),2),w=b[0],k=b[1],P=+t.query.project,_=(0,u.useCallback)(function(e){k(e)},[]),L=ee((0,u.useMemo)(function(){return(0,a.Z)({limit:v,offset:m},w)},[v,m,w])),S=L.data,z=L.loading;L.error;var R=S||{items:[],limit:v,total:0},M=R.items,A=R.total,N=(0,u.useCallback)((e=(0,r.Z)(function(e,t,i){var r;return(0,o.__generator)(this,function(l){switch(l.label){case 0:return[4,et.h.queues.update({id:+e,status:"archived"===t?"active":"archived"})];case 1:return l.sent()?(i(),r=M.map(function(n){return n.id===+e?(0,s.Z)((0,a.Z)({},n),{status:"archived"===t?"active":"archived"}):n}),n($.Nw.fillQueues(r))):ei.ZP.error("Something went wrong"),[2]}})}),function(n,t,i){return e.apply(this,arguments)}),[M,n]);return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)(h.Z,{spacing:4,children:[(0,c.jsxs)(h.Z,{direction:"row",justifyContent:"space-between",spacing:4,children:[(0,c.jsx)(h.Z,{spacing:1,children:(0,c.jsx)(Z.Z,{variant:"h4",children:"Queues"})}),(0,c.jsx)(h.Z,{alignItems:"center",direction:"row",spacing:3,children:(0,c.jsx)(f.Z,{component:q(),href:"/".concat(P+J.H.queues.add),startIcon:(0,c.jsx)(p.Z,{children:(0,c.jsx)(d.Z,{})}),variant:"contained",children:"Add"})})]}),(0,c.jsxs)(x.Z,{children:[(0,c.jsx)(y,{onFiltersChange:_,initialFilters:w}),(0,c.jsx)(G,{items:M,total:A,onPageChange:j,handleLimitChange:C,limit:v,page:g,loading:z,handleStatus:N,project_id:P})]})]})})},function(e){return(0,c.jsx)(el,{children:(0,c.jsx)(i,(0,a.Z)({},e))})});eo.defaultProps={title:"Queues"};var ec=eo},10216:function(e,n,t){"use strict";var i=t(87462);t(67294);var r=t(85893);n.Z=function(e){return(0,r.jsx)("svg",(0,i.Z)({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e,{children:(0,r.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v14m-7-7h14"})}))}}},function(e){e.O(0,[105,290,896,774,567,179],function(){return e(e.s=45366)}),_N_E=e.O()}]);