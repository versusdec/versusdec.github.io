(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[981],{99226:function(e,n,t){"use strict";var i=t(82066),r=t(85893);n.Z=(0,i.Z)((0,r.jsx)("path",{d:"m20.54 5.23-1.39-1.68C18.88 3.21 18.47 3 18 3H6c-.47 0-.88.21-1.16.55L3.46 5.23C3.17 5.57 3 6.02 3 6.5V19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6.5c0-.48-.17-.93-.46-1.27zM6.24 5h11.52l.81.97H5.44l.8-.97zM5 19V8h14v11H5zm8.45-9h-2.9v3H8l4 4 4-4h-2.55z"}),"ArchiveOutlined")},95537:function(e,n,t){"use strict";var i=t(82066),r=t(85893);n.Z=(0,i.Z)((0,r.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},60666:function(e,n,t){"use strict";var i=t(82066),r=t(85893);n.Z=(0,i.Z)((0,r.jsx)("path",{d:"m14.06 9.02.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"}),"EditOutlined")},75471:function(e,n,t){"use strict";var i=t(82066),r=t(85893);n.Z=(0,i.Z)((0,r.jsx)("path",{d:"m20.54 5.23-1.39-1.68C18.88 3.21 18.47 3 18 3H6c-.47 0-.88.21-1.16.55L3.46 5.23C3.17 5.57 3 6.02 3 6.5V19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6.5c0-.48-.17-.93-.46-1.27zM6.24 5h11.52l.83 1H5.42l.82-1zM5 19V8h14v11H5zm3-5h2.55v3h2.9v-3H16l-4-4z"}),"UnarchiveOutlined")},31425:function(e,n,t){"use strict";t.d(n,{Z:function(){return g}});var i=t(63366),r=t(87462),a=t(67294),l=t(86010),s=t(94780),o=t(90948),c=t(71657),u=t(1588),d=t(34867);function h(e){return(0,d.Z)("MuiDialogActions",e)}(0,u.Z)("MuiDialogActions",["root","spacing"]);var p=t(85893);let Z=["className","disableSpacing"],x=e=>{let{classes:n,disableSpacing:t}=e;return(0,s.Z)({root:["root",!t&&"spacing"]},h,n)},f=(0,o.ZP)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,n)=>{let{ownerState:t}=e;return[n.root,!t.disableSpacing&&n.spacing]}})(({ownerState:e})=>(0,r.Z)({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!e.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})),m=a.forwardRef(function(e,n){let t=(0,c.Z)({props:e,name:"MuiDialogActions"}),{className:a,disableSpacing:s=!1}=t,o=(0,i.Z)(t,Z),u=(0,r.Z)({},t,{disableSpacing:s}),d=x(u);return(0,p.jsx)(f,(0,r.Z)({className:(0,l.Z)(d.root,a),ownerState:u,ref:n},o))});var g=m},37645:function(e,n,t){"use strict";var i=t(87462),r=t(63366),a=t(67294),l=t(86010),s=t(94780),o=t(15861),c=t(90948),u=t(71657),d=t(4472),h=t(34182),p=t(85893);let Z=["className","id"],x=e=>{let{classes:n}=e;return(0,s.Z)({root:["root"]},d.a,n)},f=(0,c.ZP)(o.Z,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,n)=>n.root})({padding:"16px 24px",flex:"0 0 auto"}),m=a.forwardRef(function(e,n){let t=(0,u.Z)({props:e,name:"MuiDialogTitle"}),{className:s,id:o}=t,c=(0,r.Z)(t,Z),d=x(t),{titleId:m=o}=a.useContext(h.Z);return(0,p.jsx)(f,(0,i.Z)({component:"h2",className:(0,l.Z)(d.root,s),ownerState:t,ref:n,variant:"h6",id:m},c))});n.Z=m},9496:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[project]/scripts",function(){return t(92837)}])},62077:function(e,n,t){"use strict";t.d(n,{a:function(){return o}});var i=t(26042),r=t(99534),a=t(85893),l=t(87357),s=t(98456),o=function(e){var n=e.backdrop,t=e.sx;(0,r.Z)(e,["backdrop","sx"]);var o=(0,a.jsx)(l.Z,{sx:(0,i.Z)({position:"absolute",bottom:0,top:0,left:0,right:0,bgcolor:n?"rgb(0 0 1 / 30%)":"transparent",zIndex:100,display:"flex",justifyContent:"center",alignItems:"center"},t),children:(0,a.jsx)(s.Z,{disableShrink:!0,color:"primary"})});return(0,a.jsx)(a.Fragment,{children:o})}},3174:function(e,n,t){"use strict";t.d(n,{t:function(){return l}});var i=t(99534),r=t(85893),a=t(8896),l=function(e){var n=e.limit,t=e.total,l=e.page,s=e.onPageChange,o=e.onLimitChange;return(0,i.Z)(e,["limit","total","page","onPageChange","onLimitChange"]),(0,r.jsx)(a.Z,{component:"div",count:t,onPageChange:s,onRowsPerPageChange:o,page:l-1,rowsPerPage:n,rowsPerPageOptions:[10,25,50]})}},83594:function(e,n,t){"use strict";t.d(n,{h:function(){return s}});var i=t(26042),r=t(69396),a=t(828);t(11163),t(44795);var l=t(67294),s=function(){var e=(0,a.Z)((0,l.useState)({page:1,limit:10,offset:0}),2),n=e[0],t=e[1],s=(0,l.useCallback)(function(e,n){t(function(e){return(0,r.Z)((0,i.Z)({},e),{page:n+1,offset:n*e.limit})})},[]),o=(0,l.useCallback)(function(e){t(function(n){return(0,r.Z)((0,i.Z)({},n),{page:1,limit:parseInt(e.target.value,10),offset:0})})},[]);return(0,r.Z)((0,i.Z)({},n),{handlePageChange:s,handleLimitChange:o})}},92837:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return ed}});var i,r=t(47568),a=t(26042),l=t(828),s=t(70655),o=t(85893),c=t(67294),u=t(10216),d=t(26447),h=t(15861),p=t(83321),Z=t(53219),x=t(66242),f=t(64666),m=t(37645),g=t(93946),v=t(6514),j=t(31425),C=t(69396),b=t(45697),k=t.n(b),w=t(95226),P=t(88409),S=t(40044),y=t(67720),_=t(87357),z=t(57709),L=t(87109),R=[{label:"All",value:"all"},{label:"Active",value:"active"},{label:"Archived",value:"archived"}],H=function(e){var n=e.onFiltersChange,t=e.initialFilters,i=(0,c.useRef)(null),r=(0,l.Z)((0,c.useState)("all"),2),s=r[0],u=r[1],h=(0,l.Z)((0,c.useState)(t),2),p=h[0],x=h[1],f=(0,c.useCallback)(function(){null==n||n(p)},[p,n]);(0,c.useEffect)(function(){f()},[p,f]);var m=(0,c.useCallback)(function(e,n){u(n),x(function(e){var t=(0,C.Z)((0,a.Z)({},e),{status:n});return"all"===n&&delete t.status,t})},[]),g=(0,c.useCallback)(function(e){e.preventDefault(),x(function(e){var n;return(0,C.Z)((0,a.Z)({},e),{q:null===(n=i.current)||void 0===n?void 0:n.value})})},[]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(P.Z,{indicatorColor:"primary",onChange:m,scrollButtons:"auto",sx:{px:3},textColor:"primary",value:s,variant:"scrollable",children:R.map(function(e){return(0,o.jsx)(S.Z,{label:e.label,value:e.value},e.value)})}),(0,o.jsx)(y.Z,{}),(0,o.jsx)(d.Z,{alignItems:"center",direction:"row",flexWrap:"wrap",spacing:3,sx:{p:3},children:(0,o.jsx)(_.Z,{component:"form",onSubmit:g,sx:{flexGrow:1},children:(0,o.jsx)(z.Z,{defaultValue:"",fullWidth:!0,inputProps:{ref:i},placeholder:"Search",startAdornment:(0,o.jsx)(L.Z,{position:"start",children:(0,o.jsx)(Z.Z,{children:(0,o.jsx)(w.Z,{})})})})})})]})};H.propTypes={onFiltersChange:k().func};var M=t(99534),A=t(41664),V=t.n(A),F=t(75471),I=t(99226),N=t(60666),E=(0,t(82066).Z)((0,o.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"}),"ContentCopyOutlined"),q=t(95537),D=t(7906),T=t(295),W=t(68509),O=t(98102),U=t(53184),X=t(23795),B=t(34386),G=t(55136),J=t(93041),K=t(3174),Q=t(62077),Y=function(e){var n,t,i,r,s=e.items,u=e.total,d=e.onPageChange,x=e.handleLimitChange,b=e.page,k=e.limit,w=e.loading,P=e.handleStatus,S=e.userRole,y=e.handleClone,z=e.project_id,L=(0,M.Z)(e,["items","total","onPageChange","handleLimitChange","page","limit","loading","handleStatus","userRole","handleClone","project_id"]),R=(0,l.Z)((0,c.useState)({open:!1,item:null}),2),H=R[0],A=R[1],Y=(0,c.useCallback)(function(e){A({open:!0,item:e})},[]),$=(0,c.useCallback)(function(){A({open:!1,item:null})},[]);return(0,o.jsxs)(_.Z,(0,C.Z)((0,a.Z)({sx:{position:"relative"}},L),{children:[(0,o.jsx)(G.L,{children:(0,o.jsxs)(D.Z,{sx:{minWidth:700},children:[w&&!s.length&&(0,o.jsx)(T.Z,{children:(0,o.jsx)(W.Z,{children:(0,o.jsx)(O.Z,{children:(0,o.jsx)(_.Z,{sx:{position:"relative",width:"100%",height:"200px"},children:(0,o.jsx)(Q.a,{})})})})}),!w&&!s.length&&(0,o.jsx)(T.Z,{children:(0,o.jsx)(W.Z,{children:(0,o.jsx)(O.Z,{align:"center",children:(0,o.jsx)(h.Z,{variant:"subtitle2",children:"Nothing found"})})})}),!!s.length&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(U.Z,{children:(0,o.jsxs)(W.Z,{children:[(0,o.jsx)(O.Z,{children:"ID"}),(0,o.jsx)(O.Z,{children:"Name"}),(0,o.jsx)(O.Z,{children:"Status"}),(0,o.jsx)(O.Z,{align:"right",children:"Actions"})]})}),(0,o.jsx)(T.Z,{children:s.map(function(e){return(0,o.jsxs)(W.Z,{hover:!0,children:[(0,o.jsx)(O.Z,{children:e.id}),(0,o.jsx)(O.Z,{children:(0,o.jsx)(X.Z,{color:"inherit",component:V(),href:"".concat(J.H.scripts.index,"/").concat(e.id),variant:"subtitle2",children:e.name})}),(0,o.jsx)(O.Z,{children:(0,o.jsx)(h.Z,{sx:{textTransform:"capitalize",color:"active"===e.status?"success.main":"error.main"},children:e.status})}),(0,o.jsxs)(O.Z,{align:"right",children:["manager"!==S&&(0,o.jsx)(B.Z,{title:"active"===e.status?"Archive":"Unzip",children:(0,o.jsx)(g.Z,{onClick:function(){Y(e)},children:(0,o.jsx)(Z.Z,{color:"archived"===e.status?"success":"error",children:"archived"===e.status?(0,o.jsx)(F.Z,{}):(0,o.jsx)(I.Z,{})})})}),"manager"!==S&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(B.Z,{title:"Edit",children:(0,o.jsx)(g.Z,{component:V(),href:"/".concat(z,"/scripts/").concat(e.id),children:(0,o.jsx)(Z.Z,{color:"primary",children:(0,o.jsx)(N.Z,{})})})}),(0,o.jsx)(B.Z,{title:"Clone",children:(0,o.jsx)(g.Z,{onClick:function(){y(e)},children:(0,o.jsx)(Z.Z,{color:"primary",children:(0,o.jsx)(E,{})})})})]})]})]},e.id)})})]})]})}),(0,o.jsx)(K.t,{limit:k,total:u,page:b,onPageChange:d,onLimitChange:x}),(0,o.jsxs)(f.Z,{open:H.open,onClose:$,scroll:"paper",maxWidth:"sm",fullWidth:!0,children:[(0,o.jsxs)(m.Z,{sx:{pr:10},children:[(0,o.jsx)(g.Z,{"aria-label":"close",onClick:$,sx:{position:"absolute",right:8,top:8,color:function(e){return e.palette.primary.main}},children:(0,o.jsx)(q.Z,{})}),H.item&&((null===(n=H.item)||void 0===n?void 0:n.status)==="active"?"Archive script #".concat(null===(t=H.item)||void 0===t?void 0:t.id,"?"):"Unzip script #".concat(null===(i=H.item)||void 0===i?void 0:i.id,"?"))]}),(0,o.jsxs)(v.Z,{dividers:!0,children:[H.item&&"Script "," ",(0,o.jsx)(h.Z,{component:"span",variant:"subtitle1",children:H.item&&(null===(r=H.item)||void 0===r?void 0:r.name)})]}),(0,o.jsxs)(j.Z,{children:[(0,o.jsx)(p.Z,{type:"button",variant:"outlined",color:"error",onClick:$,children:"Cancel"}),(0,o.jsx)(p.Z,{type:"button",variant:"contained",onClick:function(){var e,n;P(null===(e=H.item)||void 0===e?void 0:e.id,null===(n=H.item)||void 0===n?void 0:n.status,function(){$()})},children:"Confirm"})]})]})]}))};Y.propTypes={items:k().array.isRequired,total:k().number.isRequired,onPageChange:k().func.isRequired,handleLimitChange:k().func,page:k().number.isRequired,limit:k().number.isRequired};var $=t(92951),ee=t(83720),en=t(59709),et=function(e){var n=(0,ee.I0)(),t=(0,ee.v9)(function(e){return e.scripts.list}),i=t.data,r=t.loading,a=t.error,l=(0,c.useCallback)(function(){e.q?n((0,en.wC)(e)):n((0,en.id)(e))},[e,n]),s=(0,c.useCallback)(function(){l()},[l]);return(0,c.useEffect)(function(){l()},[e,l]),{data:i,loading:r,error:a,update:s}},ei=t(83594),er=t(4056),ea=t(86501),el=t(11163),es=t(39332),eo=t(58241),ec=function(e){var n=e.children,t=(0,es.useRouter)(),i=(0,l.Z)((0,c.useState)(!1),2),r=i[0],a=i[1],s=(0,$.P)().data,u=(0,eo.a)(null==s?void 0:s.role_id),d=(0,c.useCallback)(function(){s&&(u.length||0===s.role_id)&&(0===s.role_id||u.includes("projects.scripts.read")?a(!0):t.replace(J.H.index))},[s,u,t]);return((0,c.useEffect)(function(){d()},[s,u,d]),r)?(0,o.jsx)(o.Fragment,{children:n}):null};ec.propTypes={children:k().node};var eu=(i=function(){(0,ee.I0)();var e,n,t,i,C,b=(0,el.useRouter)(),k=(0,$.P)(),w=(0,ei.h)(),P=w.page,S=w.limit,y=w.offset,_=w.handlePageChange,z=w.handleLimitChange,L=(0,l.Z)((0,c.useState)({}),2),R=L[0],M=L[1],A=+b.query.project,F=(0,l.Z)((0,c.useState)({open:!1,item:null}),2),I=F[0],N=F[1],E=(0,l.Z)((0,c.useState)(!1),2),D=E[0],T=E[1];(0,c.useCallback)(function(e){N({open:!0,item:e})},[]);var W=(0,c.useCallback)(function(){N({open:!1,item:null})},[]),O=(0,c.useCallback)(function(e){M(e)},[]),U=et((0,c.useMemo)(function(){return(0,a.Z)({limit:S,offset:y},R)},[S,y,R])),X=U.data,B=U.loading,G=(U.error,U.update),K=X||{items:[],limit:S,total:0},en=K.items,es=K.total,eo=(0,c.useCallback)((e=(0,r.Z)(function(e,n,t){return(0,s.__generator)(this,function(i){switch(i.label){case 0:return[4,er.h.scripts.update({id:+e,status:"archived"===n?"active":"archived"})];case 1:return i.sent()?(t(),G()):ea.ZP.error("Something went wrong"),[2]}})}),function(n,t,i){return e.apply(this,arguments)}),[G]),ec=(0,c.useCallback)((n=(0,r.Z)(function(e,n){var t,i;return(0,s.__generator)(this,function(r){switch(r.label){case 0:return T(!0),[4,er.h.scripts.get(e)];case 1:if(!(t=r.sent()).result)return[3,3];return delete t.result.id,[4,er.h.scripts.add(t.result)];case 2:(i=r.sent()).result&&(ea.ZP.success("Script cloned"),G()),i.error&&ea.ZP.error("Something went wrong"),r.label=3;case 3:return t.error&&ea.ZP.error("Something went wrong"),T(!1),n(),[2]}})}),function(e,t){return n.apply(this,arguments)}),[G]);return(0,o.jsxs)(o.Fragment,{children:[D&&(0,o.jsx)(Q.a,{backdrop:!0}),(0,o.jsxs)(d.Z,{spacing:4,children:[(0,o.jsxs)(d.Z,{direction:"row",justifyContent:"space-between",spacing:4,children:[(0,o.jsx)(d.Z,{spacing:1,children:(0,o.jsx)(h.Z,{variant:"h4",children:"Scripts"})}),(0,o.jsx)(d.Z,{alignItems:"center",direction:"row",spacing:3,children:(null===(t=k.data)||void 0===t?void 0:t.role)!=="manager"&&(0,o.jsx)(p.Z,{component:V(),href:"/".concat(A+J.H.scripts.add),startIcon:(0,o.jsx)(Z.Z,{children:(0,o.jsx)(u.Z,{})}),variant:"contained",children:"Add"})})]}),(0,o.jsxs)(x.Z,{children:[(0,o.jsx)(H,{onFiltersChange:O,initialFilters:R}),(0,o.jsx)(Y,{items:en,total:es,onPageChange:_,handleLimitChange:z,limit:S,page:P,loading:B,handleStatus:eo,project_id:A,userRole:null===(i=k.data)||void 0===i?void 0:i.role,handleClone:function(e){N({open:!0,item:e})}})]})]}),(0,o.jsxs)(f.Z,{open:I.open,onClose:W,scroll:"paper",maxWidth:"sm",fullWidth:!0,children:[(0,o.jsxs)(m.Z,{sx:{pr:10},children:[(0,o.jsx)(g.Z,{"aria-label":"close",onClick:W,sx:{position:"absolute",right:8,top:8,color:function(e){return e.palette.primary.main}},children:(0,o.jsx)(q.Z,{})}),"Clone script?"]}),(0,o.jsxs)(v.Z,{dividers:!0,children:[I.item&&"Script "," ",(0,o.jsx)(h.Z,{component:"span",variant:"subtitle1",children:I.item&&(null===(C=I.item)||void 0===C?void 0:C.name)})]}),(0,o.jsxs)(j.Z,{children:[(0,o.jsx)(p.Z,{type:"button",variant:"outlined",color:"error",onClick:W,children:"Cancel"}),(0,o.jsx)(p.Z,{type:"button",variant:"contained",onClick:function(){ec(I.item.id,function(){W()})},children:"Confirm"})]})]})]})},function(e){return(0,o.jsx)(ec,{children:(0,o.jsx)(i,(0,a.Z)({},e))})});eu.defaultProps={title:"Scripts"};var ed=eu},10216:function(e,n,t){"use strict";var i=t(87462);t(67294);var r=t(85893);n.Z=function(e){return(0,r.jsx)("svg",(0,i.Z)({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e,{children:(0,r.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v14m-7-7h14"})}))}}},function(e){e.O(0,[105,290,896,774,567,179],function(){return e(e.s=9496)}),_N_E=e.O()}]);