"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[622],{4625:function(e,t,n){var r=n(82066),i=n(85893);t.Z=(0,r.Z)((0,i.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12zm8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8z"}),"Block")},52584:function(e,t,n){var r=n(82066),i=n(85893);t.Z=(0,r.Z)((0,i.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm4.59-12.42L10 14.17l-2.59-2.58L6 13l4 4 8-8z"}),"CheckCircleOutlined")},95537:function(e,t,n){var r=n(82066),i=n(85893);t.Z=(0,r.Z)((0,i.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},60666:function(e,t,n){var r=n(82066),i=n(85893);t.Z=(0,r.Z)((0,i.jsx)("path",{d:"m14.06 9.02.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"}),"EditOutlined")},44267:function(e,t,n){n.d(t,{Z:function(){return v}});var r=n(87462),i=n(63366),a=n(67294),l=n(86010),s=n(94780),o=n(90948),c=n(71657),u=n(1588),d=n(34867);function h(e){return(0,d.Z)("MuiCardContent",e)}(0,u.Z)("MuiCardContent",["root"]);var p=n(85893);let Z=["className","component"],f=e=>{let{classes:t}=e;return(0,s.Z)({root:["root"]},h,t)},m=(0,o.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),x=a.forwardRef(function(e,t){let n=(0,c.Z)({props:e,name:"MuiCardContent"}),{className:a,component:s="div"}=n,o=(0,i.Z)(n,Z),u=(0,r.Z)({},n,{component:s}),d=f(u);return(0,p.jsx)(m,(0,r.Z)({as:s,className:(0,l.Z)(d.root,a),ownerState:u,ref:t},o))});var v=x},31425:function(e,t,n){n.d(t,{Z:function(){return v}});var r=n(63366),i=n(87462),a=n(67294),l=n(86010),s=n(94780),o=n(90948),c=n(71657),u=n(1588),d=n(34867);function h(e){return(0,d.Z)("MuiDialogActions",e)}(0,u.Z)("MuiDialogActions",["root","spacing"]);var p=n(85893);let Z=["className","disableSpacing"],f=e=>{let{classes:t,disableSpacing:n}=e;return(0,s.Z)({root:["root",!n&&"spacing"]},h,t)},m=(0,o.ZP)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})(({ownerState:e})=>(0,i.Z)({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!e.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})),x=a.forwardRef(function(e,t){let n=(0,c.Z)({props:e,name:"MuiDialogActions"}),{className:a,disableSpacing:s=!1}=n,o=(0,r.Z)(n,Z),u=(0,i.Z)({},n,{disableSpacing:s}),d=f(u);return(0,p.jsx)(m,(0,i.Z)({className:(0,l.Z)(d.root,a),ownerState:u,ref:t},o))});var v=x},37645:function(e,t,n){var r=n(87462),i=n(63366),a=n(67294),l=n(86010),s=n(94780),o=n(15861),c=n(90948),u=n(71657),d=n(4472),h=n(34182),p=n(85893);let Z=["className","id"],f=e=>{let{classes:t}=e;return(0,s.Z)({root:["root"]},d.a,t)},m=(0,c.ZP)(o.Z,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),x=a.forwardRef(function(e,t){let n=(0,u.Z)({props:e,name:"MuiDialogTitle"}),{className:s,id:o}=n,c=(0,i.Z)(n,Z),d=f(n),{titleId:x=o}=a.useContext(h.Z);return(0,p.jsx)(m,(0,r.Z)({component:"h2",className:(0,l.Z)(d.root,s),ownerState:n,ref:t,variant:"h6",id:x},c))});t.Z=x},61124:function(e,t,n){n.d(t,{I:function(){return p}});var r=n(26042),i=n(69396),a=n(99534),l=n(828),s=n(85893),o=n(50135),c=n(16829),u=n(67294),d=n(66660),h=(0,c.Z)(o.Z)({"& .MuiFormHelperText-root.Mui-error":{position:"absolute",top:"100%"},"input::-webkit-outer-spin-button, input::-webkit-inner-spin-button":{WebkitAppearance:"none"},"& .MuiSelect-select":{paddingTop:21}}),p=function(e){var t=e.children,n=e.type,o=(0,a.Z)(e,["children","type"]),c=(0,l.Z)((0,u.useState)(o.value||""),2),p=c[0],Z=c[1];(0,u.useEffect)(function(){Z(o.value)},[o.value]);var f=function(e){var t;null===(t=o.onChange)||void 0===t||t.call(o,e)};return"color"===n?(0,s.jsx)(d.O,(0,i.Z)((0,r.Z)({},o),{type:"text"})):(0,s.jsx)(h,(0,i.Z)((0,r.Z)({},o),{type:n,value:p,onChange:function(e){Z(e.target.value),o.select&&f(e)},onBlur:function(e){var t;o.select||f(e),null===(t=o.handleBlur)||void 0===t||t.call(o,e)},children:t}))}},3174:function(e,t,n){n.d(t,{t:function(){return l}});var r=n(99534),i=n(85893),a=n(8896),l=function(e){var t=e.limit,n=e.total,l=e.page,s=e.onPageChange,o=e.onLimitChange;return(0,r.Z)(e,["limit","total","page","onPageChange","onLimitChange"]),(0,i.jsx)(a.Z,{component:"div",count:n,onPageChange:s,onRowsPerPageChange:o,page:l-1,rowsPerPage:t,rowsPerPageOptions:[10,25,50]})}},83594:function(e,t,n){n.d(t,{h:function(){return s}});var r=n(26042),i=n(69396),a=n(828);n(11163),n(44795);var l=n(67294),s=function(){var e=(0,a.Z)((0,l.useState)({page:1,limit:10,offset:0}),2),t=e[0],n=e[1],s=(0,l.useCallback)(function(e,t){n(function(e){return(0,i.Z)((0,r.Z)({},e),{page:t+1,offset:t*e.limit})})},[]),o=(0,l.useCallback)(function(e){n(function(t){return(0,i.Z)((0,r.Z)({},t),{page:1,limit:parseInt(e.target.value,10),offset:0})})},[]);return(0,i.Z)((0,r.Z)({},t),{handlePageChange:s,handleLimitChange:o})}},60622:function(e,t,n){n.r(t),n.d(t,{default:function(){return ek}});var r,i,a=n(47568),l=n(26042),s=n(828),o=n(70655),c=n(85893),u=n(67294),d=n(41664),h=n.n(d),p=n(30136),Z=n(26447),f=n(23795),m=n(53219),x=n(15861),v=n(87918),g=n(88409),j=n(40044),b=n(67720),C=n(93041),y=n(69396),w=n(99534),S=n(66242),k=n(44267),_=n(18972),I=n(90052),P=n(50135),B=n(83321),E=n(61124),A=n(82175),M=n(74231),N=function(e){var t,n=e.onSubmit,r=(e.isNew,e.userRole),i=e.project,a=e.clients,o=(0,w.Z)(e,["onSubmit","isNew","userRole","project","clients"]),d=(0,s.Z)((0,u.useState)(null!==(t=null==a?void 0:a[0])&&void 0!==t?t:[]),2),h=d[0],p=d[1];(0,u.useEffect)(function(){i.client_id&&Array.isArray(a)&&p(a.find(function(e){return e.id===i.client_id}))},[i,a]);var f=function(e){p(e)},m=(0,u.useMemo)(function(){return i},[i]),x=M.Ry({name:M.Z_().max(255).required("Name is required"),description:M.Z_().max(255),status:M.Z_().oneOf(["active","archived"])}),v=(0,A.TA)({initialValues:m,validationSchema:x,errors:{},onSubmit:function(e,t){try{var i=(0,l.Z)({},e);0===r?i.client_id=h.id:delete i.client_id,n(i)}catch(a){console.error(a),t.setStatus({success:!1}),t.setErrors({submit:a.message}),t.setSubmitting(!1)}}});return(0,c.jsx)(Z.Z,(0,y.Z)((0,l.Z)({spacing:4},o),{children:(0,c.jsx)(S.Z,{children:(0,c.jsx)(k.Z,{children:(0,c.jsx)(Z.Z,{spacing:3,children:(0,c.jsx)("form",{noValidate:!0,children:(0,c.jsxs)(Z.Z,{spacing:3,children:[(0,c.jsx)(E.I,{fullWidth:!0,label:"Name",name:"name",type:"text",error:!!(v.touched.name&&v.errors.name),helperText:v.touched.name&&v.errors.name,onBlur:v.handleBlur,onChange:v.handleChange,value:v.values.name}),(0,c.jsx)(E.I,{fullWidth:!0,label:"Description",name:"description",type:"text",error:!!(v.touched.description&&v.errors.description),helperText:v.touched.description&&v.errors.description,onBlur:v.handleBlur,onChange:v.handleChange,value:v.values.description}),(0,c.jsxs)(E.I,{fullWidth:!0,label:"Status",name:"status",onBlur:v.handleBlur,onChange:v.handleChange,select:!0,value:v.values.status,children:[(0,c.jsx)(_.Z,{value:"active",children:"Active"},"active"),(0,c.jsx)(_.Z,{value:"archived",children:"Archived"},"archived")]}),0===r&&a&&(0,c.jsx)(I.Z,{disablePortal:!0,disableClearable:!0,options:a,getOptionLabel:function(e){return(e.name?e.name+" | ":"")+e.email},onChange:function(e,t){f(t)},value:h||a[0],renderInput:function(e){return(0,c.jsx)(P.Z,(0,y.Z)((0,l.Z)({},e),{fullWidth:!0,name:"client_id",label:"Client"}))}}),(0,c.jsx)(Z.Z,{direction:"row",justifyContent:"end",children:(0,c.jsx)(B.Z,{size:"large",type:"submit",variant:"contained",onClick:v.handleSubmit,children:"Save"})})]})})})})})}))},T=n(11163),F=n(92951),L=n(4056),R=n(83240),z=n(86501),W=n(83720),V=n(39332),D=n(45697),q=n.n(D),O=n(58241),H=function(e){var t=e.children,n=(0,V.useRouter)(),r=(0,s.Z)((0,u.useState)(!1),2),i=r[0],a=r[1],l=(0,F.P)().data,o=(0,O.a)(null==l?void 0:l.role_id),d=(0,u.useCallback)(function(){l&&(o.length||0===l.role_id)&&(0===l.role_id||o.includes("projects.write")?a(!0):n.replace(C.H.denied))},[l,o,n]);return((0,u.useEffect)(function(){d()},[l,o,d]),i)?(0,c.jsx)(c.Fragment,{children:t}):null};H.propTypes={children:q().node};var U=n(95039),X=n(83594),$=n(36305),G=n(52584),J=n(4625),K=n(60666),Q=n(95537),Y=(0,n(82066).Z)((0,c.jsx)("path",{d:"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"}),"DeleteOutlined"),ee=n(87357),et=n(7906),en=n(295),er=n(68509),ei=n(98102),ea=n(53184),el=n(34386),es=n(93946),eo=n(64666),ec=n(37645),eu=n(6514),ed=n(31425),eh=n(55136),ep=n(3174),eZ=n(10216),ef=M.Ry({name:M.Z_().max(255).required("Name is required"),label:M.Z_().max(255).required("Label is required"),type:M.Z_().oneOf(["string","int","boolean","date","time","datetime","select"]),options:M.IX().of(M.Ry({value:M.Z_()}))}),em=function(e){var t=e.items,n=e.limit,r=e.page,i=e.total,a=e.onPageChange,o=e.handleLimitChange,d=e.handleStatus,h=e.projectId,p=e.handleAdd,f=e.handleEdit,v=(0,w.Z)(e,["items","limit","page","total","onPageChange","handleLimitChange","handleStatus","projectId","handleAdd","handleEdit"]),g=(0,s.Z)((0,u.useState)({open:!1,item:{type:"string",label:"",project_id:h,name:"",options:[{value:""}]},edit:!1}),2),j=g[0],b=g[1],C=(0,u.useCallback)(function(){b(function(e){return(0,y.Z)((0,l.Z)({},e),{open:!0})})},[]),k=(0,u.useCallback)(function(e){var t=(0,l.Z)({},e);t.options||(t.options=[{value:""}]),b(function(e){return{open:!0,edit:!0,item:t}})},[]),I=(0,u.useCallback)(function(e){var t=(0,$.Z)(j.item.options);t.splice(e,1),b(function(e){return(0,y.Z)((0,l.Z)({},e),{item:(0,y.Z)((0,l.Z)({},e.item),{type:"select",options:t})})})},[j]),P=(0,u.useCallback)(function(e){var t=(0,$.Z)(j.item.options);t.push({value:""}),console.log(t),b(function(e){return(0,y.Z)((0,l.Z)({},e),{item:(0,y.Z)((0,l.Z)({},e.item),{type:"select",options:t})})})},[j]),M=(0,u.useCallback)(function(e,t){var n=(0,$.Z)(j.item.options);n[e].value=t,b(function(e){return(0,y.Z)((0,l.Z)({},e),{item:(0,y.Z)((0,l.Z)({},e.item),{type:"select",options:n})})})},[j]),N=(0,u.useMemo)(function(){return j.item},[j]),T=(0,A.TA)({initialValues:N,validationSchema:ef,errors:{},enableReinitialize:!0,onSubmit:function(e,t){try{"select"===e.type&&e.options.forEach(function(e,t){e.id=t}),j.edit?f(e,F):p(e,F)}catch(n){console.error(n),t.setStatus({success:!1}),t.setErrors({submit:n.message}),t.setSubmitting(!1)}}}),F=(0,u.useCallback)(function(){b(function(e){return{open:!1,item:{type:"string",label:"",project_id:h,name:"",options:[{value:""}]},edit:!1}}),T.setValues(N,!1)},[T,N,h]);return(0,c.jsx)(S.Z,{children:(0,c.jsxs)(ee.Z,(0,y.Z)((0,l.Z)({sx:{position:"relative"}},v),{children:[(0,c.jsx)(Z.Z,{alignItems:"center",justifyContent:"flex-end",direction:"row",spacing:3,sx:{p:3},children:(0,c.jsx)(B.Z,{onClick:C,startIcon:(0,c.jsx)(m.Z,{children:(0,c.jsx)(eZ.Z,{})}),variant:"contained",children:"Add"})}),(0,c.jsx)(eh.L,{children:(0,c.jsxs)(et.Z,{sx:{minWidth:700},children:[!t.length&&(0,c.jsx)(en.Z,{children:(0,c.jsx)(er.Z,{children:(0,c.jsx)(ei.Z,{align:"center",children:(0,c.jsx)(x.Z,{variant:"subtitle2",children:"Nothing found"})})})}),!!t.length&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(ea.Z,{children:(0,c.jsxs)(er.Z,{children:[(0,c.jsx)(ei.Z,{children:"ID"}),(0,c.jsx)(ei.Z,{children:"Name"}),(0,c.jsx)(ei.Z,{children:"Type"}),(0,c.jsx)(ei.Z,{children:"Status"}),(0,c.jsx)(ei.Z,{align:"right",children:"Actions"})]})}),(0,c.jsx)(en.Z,{children:t.map(function(e){return(0,c.jsxs)(er.Z,{hover:!0,children:[(0,c.jsx)(ei.Z,{children:e.id}),(0,c.jsx)(ei.Z,{children:e.label}),(0,c.jsx)(ei.Z,{children:e.type}),(0,c.jsx)(ei.Z,{children:(0,c.jsx)(x.Z,{sx:{textTransform:"capitalize",color:"active"===e.status?"success.main":"error.main"},children:e.status})}),(0,c.jsxs)(ei.Z,{align:"right",children:[(0,c.jsx)(el.Z,{title:"active"===e.status?"Archive":"Unzip",children:(0,c.jsx)(es.Z,{onClick:function(){d(e.id,"active"===e.status?"archived":"active")},children:(0,c.jsx)(m.Z,{color:"archived"===e.status?"success":"error",children:"archived"===e.status?(0,c.jsx)(G.Z,{}):(0,c.jsx)(J.Z,{})})})}),(0,c.jsx)(el.Z,{title:"Edit",children:(0,c.jsx)(es.Z,{onClick:function(){k(e)},children:(0,c.jsx)(m.Z,{color:"primary",children:(0,c.jsx)(K.Z,{})})})})]})]},e.id)})})]})]})}),(0,c.jsx)(ep.t,{limit:n,total:i,page:r,onPageChange:a,onLimitChange:o}),(0,c.jsx)(eo.Z,{open:j.open,onClose:F,scroll:"paper",maxWidth:"sm",fullWidth:!0,children:(0,c.jsxs)("form",{noValidate:!0,children:[(0,c.jsxs)(ec.Z,{sx:{pr:10},children:[(0,c.jsx)(es.Z,{"aria-label":"close",onClick:F,sx:{position:"absolute",right:8,top:8,color:function(e){return e.palette.primary.main}},children:(0,c.jsx)(Q.Z,{})}),j.edit?"Edit field":"Create field"]}),(0,c.jsx)(eu.Z,{dividers:!0,children:(0,c.jsxs)(Z.Z,{spacing:3,children:[(0,c.jsx)(E.I,{fullWidth:!0,label:"Name",name:"label",type:"text",error:!!(T.touched.label&&T.errors.label),helperText:T.touched.label&&T.errors.label,onBlur:T.handleBlur,onChange:T.handleChange,value:T.values.label}),(0,c.jsx)(E.I,{fullWidth:!0,label:"Field",name:"name",type:"text",error:!!(T.touched.name&&T.errors.name),helperText:T.touched.name&&T.errors.name,onBlur:T.handleBlur,onChange:T.handleChange,value:T.values.name}),(0,c.jsxs)(E.I,{fullWidth:!0,label:"Type",name:"type",onBlur:T.handleBlur,onChange:T.handleChange,select:!0,value:T.values.type,children:[(0,c.jsx)(_.Z,{value:"string",children:"String"},"string"),(0,c.jsx)(_.Z,{value:"int",children:"Integer"},"int"),(0,c.jsx)(_.Z,{value:"boolean",children:"Boolean"},"boolean"),(0,c.jsx)(_.Z,{value:"date",children:"Date"},"date"),(0,c.jsx)(_.Z,{value:"time",children:"Time"},"time"),(0,c.jsx)(_.Z,{value:"datetime",children:"Datetime"},"datetime"),(0,c.jsx)(_.Z,{value:"select",children:"Select"},"select")]}),"select"===T.values.type&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(Z.Z,{direction:"row",spacing:3,alignItems:"center",justifyContent:"space-between",children:[(0,c.jsx)(x.Z,{variant:"subtitle2",children:"Options"}),(0,c.jsx)(el.Z,{title:"Add option",children:(0,c.jsx)(es.Z,{onClick:function(){P()},color:"primary",children:(0,c.jsx)(eZ.Z,{})})})]}),T.values.options.map(function(e,t){var n,r,i,a;return(0,c.jsxs)(Z.Z,{alignItems:"center",direction:"row",spacing:3,children:[(0,c.jsx)(E.I,{name:"options[".concat(t,"].value"),fullWidth:!0,value:T.values.options[t].value,label:"Name",type:"text",error:!!(T.touched.options&&Boolean(T.touched.options[t])&&Boolean(null===(n=T.errors.options)||void 0===n?void 0:n[t])&&(null===(r=T.errors.options)||void 0===r?void 0:r[t].value)),helperText:T.touched.options&&Boolean(T.touched.options[t])&&Boolean(null===(i=T.errors.options)||void 0===i?void 0:i[t])&&(null===(a=T.errors.options)||void 0===a?void 0:a[t].value),onBlur:T.handleBlur,onChange:function(e){M(t,e.currentTarget.value),T.setFieldValue("options[".concat(t,"].value"),e.currentTarget.value)}}),(0,c.jsx)(el.Z,{title:"Remove",children:(0,c.jsx)("span",{children:(0,c.jsx)(es.Z,{onClick:function(){I(t)},disabled:1===j.item.options.length,color:1!==j.item.options.length?"primary":"",children:(0,c.jsx)(Y,{})})})})]},e.value+t)})]})]})}),(0,c.jsxs)(ed.Z,{children:[(0,c.jsx)(B.Z,{type:"button",variant:"outlined",color:"error",onClick:F,children:"Cancel"}),(0,c.jsx)(B.Z,{type:"button",variant:"contained",onClick:T.handleSubmit,children:"Confirm"})]})]})})]}))})},ex=n(11791),ev=n(74144),eg=M.Ry({tag:M.Z_().max(255).required("Name is required"),styles:M.Z_(),color:M.Z_()}),ej=function(e){var t=e.handleEditDialog,n=e.handleStatus,r=e.item;return(0,c.jsx)(ex.Z,{sx:{p:1,background:r.styles||"white",color:r.color||"inherit"},children:(0,c.jsxs)(Z.Z,{spacing:1,direction:"row",alignItems:"center",children:[(0,c.jsx)(ee.Z,{children:r.tag}),(0,c.jsx)(el.Z,{title:"active"===r.status?"Remove":"Unzip",children:(0,c.jsx)(es.Z,{size:"small",onClick:function(){n(r.id,"active"===r.status?"archived":"active")},children:(0,c.jsx)(Y,{fontSize:"small",color:"archived"===r.status?"success":"error"})})}),(0,c.jsx)(el.Z,{title:"Edit",children:(0,c.jsx)(es.Z,{size:"small",onClick:function(){t(r)},children:(0,c.jsx)(K.Z,{color:"primary",fontSize:"small"})})})]})})},eb=function(e){var t=e.items,n=e.handleStatus,r=e.projectId,i=e.handleAdd,a=e.handleEdit,o=(0,w.Z)(e,["items","handleStatus","projectId","handleAdd","handleEdit"]),d=(0,s.Z)((0,u.useState)({open:!1,item:{project_id:r,tag:"",color:ev.n$[900],styles:"#FFFFFF"},edit:!1}),2),h=d[0],p=d[1],f=(0,u.useCallback)(function(){p(function(e){return(0,y.Z)((0,l.Z)({},e),{open:!0})})},[]),v=(0,u.useCallback)(function(e){p(function(t){return{open:!0,edit:!0,item:e}})},[]),g=(0,u.useMemo)(function(){return h.item},[h]),j=(0,A.TA)({initialValues:g,validationSchema:eg,errors:{},enableReinitialize:!0,onSubmit:function(e,t){try{h.edit?a(e,b):i(e,b)}catch(n){console.error(n),t.setStatus({success:!1}),t.setErrors({submit:n.message}),t.setSubmitting(!1)}}}),b=(0,u.useCallback)(function(){p(function(e){return{open:!1,item:{project_id:r,tag:"",color:"",styles:"#FFFFFF"},edit:!1}}),j.setValues(g,!1)},[j,g,r]);return(0,c.jsx)(S.Z,{children:(0,c.jsxs)(ee.Z,(0,y.Z)((0,l.Z)({sx:{position:"relative"}},o),{children:[(0,c.jsx)(Z.Z,{alignItems:"center",justifyContent:"flex-end",direction:"row",spacing:3,sx:{p:3},children:(0,c.jsx)(B.Z,{onClick:f,startIcon:(0,c.jsx)(m.Z,{children:(0,c.jsx)(eZ.Z,{})}),variant:"contained",children:"Add"})}),(0,c.jsx)(eh.L,{children:(0,c.jsxs)(Z.Z,{direction:"row",spacing:3,children:[!t.length&&(0,c.jsx)(ee.Z,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"center",width:"100%"},p:3,children:(0,c.jsx)(x.Z,{variant:"subtitle2",children:"Nothing found"})}),!!t.length&&(0,c.jsx)(Z.Z,{p:3,pt:0,spacing:3,direction:"row",flexWrap:"wrap",children:t.map(function(e){return(0,c.jsx)(ej,{handleStatus:n,handleEditDialog:v,item:e},e.id)})})]})}),(0,c.jsx)(eo.Z,{open:h.open,onClose:b,scroll:"paper",maxWidth:"sm",fullWidth:!0,children:(0,c.jsxs)("form",{noValidate:!0,children:[(0,c.jsxs)(ec.Z,{sx:{pr:10},children:[(0,c.jsx)(es.Z,{"aria-label":"close",onClick:b,sx:{position:"absolute",right:8,top:8,color:function(e){return e.palette.primary.main}},children:(0,c.jsx)(Q.Z,{})}),h.edit?"Edit tag":"Create tag"]}),(0,c.jsx)(eu.Z,{dividers:!0,children:(0,c.jsxs)(Z.Z,{spacing:3,children:[(0,c.jsx)(E.I,{fullWidth:!0,label:"Name",name:"tag",type:"text",error:!!(j.touched.tag&&j.errors.tag),helperText:j.touched.tag&&j.errors.tag,onBlur:j.handleBlur,onChange:j.handleChange,value:j.values.tag}),(0,c.jsx)(E.I,{fullWidth:!0,label:"Text color",name:"color",type:"color",error:!!(j.touched.color&&j.errors.color),helperText:j.touched.color&&j.errors.color,onBlur:j.handleBlur,onChange:function(e){j.setFieldValue("color",e)},value:j.values.color}),(0,c.jsx)(E.I,{fullWidth:!0,label:"Style",name:"styles",type:"color",error:!!(j.touched.styles&&j.errors.styles),helperText:j.touched.styles&&j.errors.styles,onBlur:j.handleBlur,onChange:function(e){j.setFieldValue("styles",e)},value:j.values.styles})]})}),(0,c.jsxs)(ed.Z,{children:[(0,c.jsx)(B.Z,{type:"button",variant:"outlined",color:"error",onClick:b,children:"Cancel"}),(0,c.jsx)(B.Z,{type:"button",variant:"contained",onClick:j.handleSubmit,children:"Confirm"})]})]})})]}))})},eC=[{label:"Common",value:"common"},{label:"Fields",value:"fields"},{label:"Tags",value:"tags"}],ey=function(e,t){var n=(0,l.Z)({},e,t);for(var r in n)""===n[r]&&delete n[r];return n},ew=(r=(0,a.Z)(function(e,t,n){var r;return(0,o.__generator)(this,function(i){switch(i.label){case 0:return r=ey(e,t),[4,L.h.users.update(r)];case 1:return i.sent().error?z.ZP.error("Something went wrong"):(n(R.Nw.fillProject(r)),z.ZP.success("Changes saved")),[2]}})}),function(e,t,n){return r.apply(this,arguments)}),eS=(i=function(){var e,t,n,r,i,d,y,w=(0,T.useRouter)();if(!Number.isInteger(+w.query.project)&&"/projects/add"!==w.pathname)return w.replace(C.H.not_found),(0,c.jsx)(c.Fragment,{});var S=(0,W.I0)(),k=(0,F.P)(),_=(0,s.Z)((0,u.useState)("common"),2),I=_[0],P=_[1],B=(0,s.Z)((0,u.useState)({name:"",status:"active",description:""}),2),E=B[0],A=B[1],M=(0,X.h)(),V=M.page,D=M.limit,q=M.offset,O=M.handlePageChange,H=M.handleLimitChange,$=(0,s.Z)((0,u.useState)(null),2),G=$[0],J=$[1],K=(0,s.Z)((0,u.useState)({items:[],limit:10,total:0}),2),Q=K[0],Y=K[1],ee=(0,s.Z)((0,u.useState)([]),2),et=ee[0],en=ee[1],er=+w.query.project,ei=isNaN(er),ea=(0,U.P)(er),el=(0,u.useMemo)(function(){return{limit:D,offset:q}},[D,q]);(0,u.useEffect)(function(){return ea.project&&A(ea.project),function(){S(R.Nw.fillProject(null))}},[S,ea,er]);var es=(0,u.useCallback)((0,a.Z)(function(){var e,t;return(0,o.__generator)(this,function(n){switch(n.label){case 0:return[4,L.h.users.list({role:"client",status:"active",limit:1e3})];case 1:return t=(e=n.sent()).result,e.error,t&&J(t.items),[2]}})}),[]),eo=(0,u.useCallback)((0,a.Z)(function(){var e,t;return(0,o.__generator)(this,function(n){switch(n.label){case 0:return[4,L.h.fields.list((0,l.Z)({project_id:er},el))];case 1:return t=(e=n.sent()).result,e.error,t&&Y(t),[2]}})}),[el,er]),ec=(0,u.useCallback)((0,a.Z)(function(){var e,t;return(0,o.__generator)(this,function(n){switch(n.label){case 0:return[4,L.h.tags.list({project_id:er,status:"active",limit:1e3})];case 1:return t=(e=n.sent()).result,e.error,t&&en(t.items),[2]}})}),[er]);(0,u.useEffect)(function(){er&&eo()},[el,eo,er]),(0,u.useEffect)(function(){k.data&&0===k.data.role_id&&es()},[es,k.data]),(0,u.useEffect)(function(){er&&ec()},[er,ec]);var eu=(0,u.useCallback)((e=(0,a.Z)(function(e,t){var n,r,i;return(0,o.__generator)(this,function(a){switch(a.label){case 0:return[4,L.h.fields.update(e)];case 1:return r=(n=a.sent()).result,i=n.error,r?(t(),eo()):i&&z.ZP.error(i.message),[2]}})}),function(t,n){return e.apply(this,arguments)}),[eo]),ed=(0,u.useCallback)((t=(0,a.Z)(function(e,t){var n,r,i;return(0,o.__generator)(this,function(a){switch(a.label){case 0:return[4,L.h.fields.add(e)];case 1:return r=(n=a.sent()).result,i=n.error,r?(t(),eo()):i&&z.ZP.error(i.message),[2]}})}),function(e,n){return t.apply(this,arguments)}),[eo]),eh=(0,u.useCallback)((n=(0,a.Z)(function(e,t){var n,r,i;return(0,o.__generator)(this,function(a){switch(a.label){case 0:return[4,L.h.fields.update({id:e,status:t})];case 1:return r=(n=a.sent()).result,i=n.error,r?eo():i&&z.ZP.error(i.message),[2]}})}),function(e,t){return n.apply(this,arguments)}),[eo]),ep=(0,u.useCallback)((r=(0,a.Z)(function(e,t){var n,r,i;return(0,o.__generator)(this,function(a){switch(a.label){case 0:return[4,L.h.tags.update({id:e,status:t})];case 1:return r=(n=a.sent()).result,i=n.error,r?ec():i&&z.ZP.error(i.message),[2]}})}),function(e,t){return r.apply(this,arguments)}),[ec]),eZ=(0,u.useCallback)((i=(0,a.Z)(function(e,t){var n,r,i;return(0,o.__generator)(this,function(a){switch(a.label){case 0:return[4,L.h.tags.update(e)];case 1:return r=(n=a.sent()).result,i=n.error,r?(t(),ec()):i&&z.ZP.error(i.message),[2]}})}),function(e,t){return i.apply(this,arguments)}),[ec]),ef=(0,u.useCallback)((d=(0,a.Z)(function(e,t){var n,r,i;return(0,o.__generator)(this,function(a){switch(a.label){case 0:return[4,L.h.tags.add(e)];case 1:return r=(n=a.sent()).result,i=n.error,r?(t(),ec()):i&&z.ZP.error(i.message),[2]}})}),function(e,t){return d.apply(this,arguments)}),[ec]),ex=(0,u.useCallback)(function(e,t){P(t)},[]),ev=(0,u.useCallback)((y=(0,a.Z)(function(e){var t,n,r;return(0,o.__generator)(this,function(i){switch(i.label){case 0:if(!ei)return[3,5];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,L.h.projects.add(ey(E,e))];case 2:return n=(t=i.sent()).result,r=t.error,n&&!r?w.replace("/projects/"+n):z.ZP.error("Something went wrong"),[3,4];case 3:return i.sent(),z.ZP.error("Something went wrong"),[3,4];case 4:return[3,6];case 5:ew(E,e,S),i.label=6;case 6:return[2]}})}),function(e){return y.apply(this,arguments)}),[E,S,ei,w]);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(Z.Z,{spacing:4,mb:3,children:[(0,c.jsx)("div",{children:(0,c.jsxs)(f.Z,{color:"text.primary",component:h(),href:C.H.projects.index,sx:{alignItems:"center",display:"inline-flex"},underline:"hover",children:[(0,c.jsx)(m.Z,{sx:{mr:1},children:(0,c.jsx)(p.Z,{})}),(0,c.jsx)(x.Z,{variant:"subtitle2",children:"Projects"})]})}),(0,c.jsx)(Z.Z,{alignItems:"flex-start",direction:{xs:"column",md:"row"},justifyContent:"space-between",spacing:4,children:(0,c.jsx)(Z.Z,{alignItems:"center",direction:"row",spacing:2,children:(0,c.jsxs)(Z.Z,{children:[(0,c.jsxs)(x.Z,{variant:"h4",children:[ei&&"Add project",!ei&&E&&E.name]}),!ei&&E&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(x.Z,{variant:"body2",color:"text.secondary",children:E.description}),(0,c.jsxs)(Z.Z,{alignItems:"center",direction:"row",spacing:1,children:[(0,c.jsx)(x.Z,{variant:"subtitle2",children:"ID:"}),(0,c.jsx)(v.Z,{label:E.id,size:"small"})]})]})]})})}),(0,c.jsxs)("div",{children:[(0,c.jsx)(g.Z,{indicatorColor:"primary",onChange:ex,scrollButtons:"auto",sx:{mt:3},textColor:"primary",value:I,variant:"scrollable",children:eC.map(function(e){return(0,c.jsx)(j.Z,{label:e.label,value:e.value,disabled:(!ei||"common"!==e.value)&&ei},e.value)})}),(0,c.jsx)(b.Z,{})]})]}),"common"===I&&(0,c.jsx)("div",{children:(!ei&&E.id||ei)&&ea&&(0,c.jsx)(N,{project:E,userRole:k.data.role_id,isNew:ei,onSubmit:ev,clients:G})}),"fields"===I&&(0,c.jsx)(em,{items:Q.items,total:Q.total,onPageChange:O,handleLimitChange:H,handleAdd:ed,handleEdit:eu,handleStatus:eh,limit:D,page:V,projectId:er}),"tags"===I&&(0,c.jsx)(eb,{items:et,handleAdd:ef,handleEdit:eZ,handleStatus:ep,projectId:er})]})},function(e){return(0,c.jsx)(H,{children:(0,c.jsx)(i,(0,l.Z)({},e))})}),ek=eS;eS.defaultProps={title:"Projects"}},36305:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(20943),i=n(13375),a=n(91566);function l(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||(0,i.Z)(e)||(0,a.Z)(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},30136:function(e,t,n){var r=n(87462);n(67294);var i=n(85893);t.Z=function(e){return(0,i.jsxs)("svg",(0,r.Z)({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e,{children:[(0,i.jsx)("path",{fill:"#fff",fillOpacity:.01,d:"m12 19-7-7 7-7"}),(0,i.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 12H5m0 0 7 7m-7-7 7-7"})]}))}},10216:function(e,t,n){var r=n(87462);n(67294);var i=n(85893);t.Z=function(e){return(0,i.jsx)("svg",(0,r.Z)({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e,{children:(0,i.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v14m-7-7h14"})}))}}}]);